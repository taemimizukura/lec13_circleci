2024-10-20 15:00:55,276 p=20586 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:00:55,306 p=20586 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:00:57,078 p=20586 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:00:57,087 p=20586 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:00:57,483 p=20586 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:00:57,491 p=20586 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:00:58,362 p=20586 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:00:58,373 p=20586 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:00:58,743 p=20586 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:00:58,752 p=20586 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:01:01,706 p=20586 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:01:01,718 p=20586 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:01:06,719 p=20586 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:01:06,728 p=20586 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:01:06,743 p=20586 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:01:06,752 p=20586 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:01:07,027 p=20586 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:01:07,037 p=20586 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:01:07,069 p=20586 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed.rc != 0' failed. The error was: error while evaluating conditional (rbenv_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 14, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Clone rbenv if not installed'\n  ^ here\n"}
2024-10-20 15:01:07,072 p=20586 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:01:07,072 p=20586 u=ec2-user n=ansible | 18.180.2.113               : ok=6    changed=2    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2024-10-20 15:02:58,573 p=20778 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:02:58,590 p=20778 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:03:00,110 p=20778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:03:00,118 p=20778 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:03:00,476 p=20778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:03:00,484 p=20778 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:03:01,340 p=20778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:03:01,351 p=20778 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:03:01,715 p=20778 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:03:01,734 p=20778 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:03:04,107 p=20778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:03:04,118 p=20778 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:03:08,784 p=20778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:03:08,794 p=20778 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:03:08,808 p=20778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:03:08,816 p=20778 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:03:09,080 p=20778 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:03:09,089 p=20778 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:03:09,121 p=20778 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:03:09,128 p=20778 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:03:09,511 p=20778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:03:09,521 p=20778 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:03:09,763 p=20778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:03:09,771 p=20778 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:03:10,017 p=20778 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:03:10,026 p=20778 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:03:10,266 p=20778 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:03:10,274 p=20778 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:03:10,308 p=20778 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'ruby_build_installed.rc != 0' failed. The error was: error while evaluating conditional (ruby_build_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 48, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Clone ruby-build if not installed'\n  ^ here\n"}
2024-10-20 15:03:10,310 p=20778 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:03:10,310 p=20778 u=ec2-user n=ansible | 18.180.2.113               : ok=8    changed=4    unreachable=0    failed=1    skipped=5    rescued=0    ignored=0   
2024-10-20 15:03:57,603 p=20968 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:03:57,621 p=20968 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:03:58,952 p=20968 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:03:58,962 p=20968 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:03:59,320 p=20968 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:03:59,329 p=20968 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:04:00,171 p=20968 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:04:00,181 p=20968 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:04:00,524 p=20968 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:04:00,532 p=20968 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:04:02,873 p=20968 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:04:02,889 p=20968 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:04:07,546 p=20968 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:04:07,554 p=20968 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:04:07,570 p=20968 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:04:07,578 p=20968 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:04:07,852 p=20968 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:04:07,863 p=20968 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:04:07,907 p=20968 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:04:07,916 p=20968 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:04:08,301 p=20968 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:04:08,312 p=20968 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:04:08,557 p=20968 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:04:08,566 p=20968 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:04:08,807 p=20968 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:04:08,816 p=20968 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:04:09,058 p=20968 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:04:09,067 p=20968 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:04:09,100 p=20968 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'ruby_build_installed.rc != 0' failed. The error was: error while evaluating conditional (ruby_build_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 47, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Clone ruby-build if not installed'\n  ^ here\n"}
2024-10-20 15:04:09,101 p=20968 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:04:09,102 p=20968 u=ec2-user n=ansible | 18.180.2.113               : ok=8    changed=4    unreachable=0    failed=1    skipped=5    rescued=0    ignored=0   
2024-10-20 15:04:23,524 p=21151 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:04:23,542 p=21151 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:04:24,860 p=21151 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:04:24,870 p=21151 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:04:25,228 p=21151 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:04:25,237 p=21151 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:04:26,088 p=21151 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:04:26,098 p=21151 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:04:26,441 p=21151 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:04:26,450 p=21151 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:04:28,793 p=21151 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:04:28,803 p=21151 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:04:33,437 p=21151 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:04:33,446 p=21151 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:04:33,462 p=21151 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:04:33,471 p=21151 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:04:33,733 p=21151 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:04:33,748 p=21151 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:04:33,788 p=21151 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:04:33,796 p=21151 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:04:34,179 p=21151 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:04:34,188 p=21151 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:04:34,428 p=21151 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:04:34,438 p=21151 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:04:34,682 p=21151 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:04:34,691 p=21151 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:04:34,930 p=21151 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:04:34,939 p=21151 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:04:34,970 p=21151 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:04:34,979 p=21151 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:04:35,366 p=21151 u=ec2-user n=ansible | ERROR! The requested handler 'Reload profile' was not found in either the main handlers list nor in the listening handlers list
2024-10-20 15:06:10,494 p=21344 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:06:10,512 p=21344 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:06:12,044 p=21344 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:06:12,053 p=21344 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:06:12,405 p=21344 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:06:12,413 p=21344 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:06:13,244 p=21344 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:06:13,254 p=21344 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:06:13,622 p=21344 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:06:13,632 p=21344 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:06:16,035 p=21344 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:06:16,046 p=21344 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:06:20,725 p=21344 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:06:20,737 p=21344 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:06:20,754 p=21344 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:06:20,762 p=21344 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:06:21,028 p=21344 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:06:21,037 p=21344 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:06:21,067 p=21344 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:06:21,076 p=21344 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:06:21,461 p=21344 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:06:21,471 p=21344 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:06:21,714 p=21344 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:06:21,724 p=21344 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:06:21,965 p=21344 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:06:21,974 p=21344 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:06:22,214 p=21344 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:06:22,224 p=21344 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:06:22,255 p=21344 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:06:22,264 p=21344 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:06:22,646 p=21344 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:06:22,656 p=21344 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:06:22,918 p=21344 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:06:22,927 p=21344 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:06:22,959 p=21344 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 74, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Set Ruby 3.2.3 as global version'\n  ^ here\n"}
2024-10-20 15:06:22,961 p=21344 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:06:22,962 p=21344 u=ec2-user n=ansible | 18.180.2.113               : ok=9    changed=5    unreachable=0    failed=1    skipped=7    rescued=0    ignored=0   
2024-10-20 15:08:54,431 p=21577 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:08:54,449 p=21577 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:08:55,981 p=21577 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:08:55,989 p=21577 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:08:56,346 p=21577 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:08:56,354 p=21577 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:08:57,200 p=21577 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:08:57,210 p=21577 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:08:57,555 p=21577 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:08:57,564 p=21577 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:08:59,919 p=21577 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:08:59,930 p=21577 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:09:04,643 p=21577 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:09:04,653 p=21577 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:09:04,666 p=21577 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:09:04,676 p=21577 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:09:04,921 p=21577 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:04,930 p=21577 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:09:04,962 p=21577 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:04,971 p=21577 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:09:05,353 p=21577 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:09:05,362 p=21577 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:09:05,624 p=21577 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:09:05,634 p=21577 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:09:05,880 p=21577 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:05,889 p=21577 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:09:06,133 p=21577 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:06,142 p=21577 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:09:06,176 p=21577 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:06,185 p=21577 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:09:06,583 p=21577 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:09:06,593 p=21577 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:09:06,861 p=21577 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:06,870 p=21577 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:09:06,903 p=21577 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:09:06,905 p=21577 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:09:06,905 p=21577 u=ec2-user n=ansible | 18.180.2.113               : ok=9    changed=5    unreachable=0    failed=1    skipped=7    rescued=0    ignored=0   
2024-10-20 15:09:47,734 p=21787 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:09:47,752 p=21787 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:09:49,096 p=21787 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:09:49,109 p=21787 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:09:49,479 p=21787 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:09:49,487 p=21787 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:09:50,360 p=21787 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:09:50,370 p=21787 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:09:50,729 p=21787 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:50,738 p=21787 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:09:53,108 p=21787 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:09:53,117 p=21787 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:09:57,775 p=21787 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:09:57,785 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:09:57,800 p=21787 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:09:57,809 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:09:58,080 p=21787 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:58,089 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:09:58,121 p=21787 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:58,130 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:09:58,503 p=21787 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:09:58,519 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:09:58,779 p=21787 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:09:58,788 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:09:59,037 p=21787 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:59,047 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:09:59,296 p=21787 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:59,304 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:09:59,336 p=21787 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:09:59,345 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:09:59,737 p=21787 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:09:59,746 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:10:00,015 p=21787 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:10:00,026 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:10:00,062 p=21787 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:10:00,062 p=21787 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:10:00,070 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 15:10:00,323 p=21787 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:10:00,332 p=21787 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 15:10:00,365 p=21787 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'bundler_installed.rc != 0' failed. The error was: error while evaluating conditional (bundler_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 79, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Install bundler if not installed'\n  ^ here\n"}
2024-10-20 15:10:00,368 p=21787 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:10:00,368 p=21787 u=ec2-user n=ansible | 18.180.2.113               : ok=10   changed=5    unreachable=0    failed=1    skipped=8    rescued=0    ignored=1   
2024-10-20 15:10:25,323 p=22008 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:10:25,341 p=22008 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:10:26,644 p=22008 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:10:26,655 p=22008 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:10:27,018 p=22008 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:10:27,032 p=22008 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:10:27,876 p=22008 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:10:27,888 p=22008 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:10:28,234 p=22008 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:10:28,245 p=22008 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:10:30,619 p=22008 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:10:30,630 p=22008 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:10:35,328 p=22008 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:10:35,338 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:10:35,352 p=22008 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:10:35,360 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:10:35,610 p=22008 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:10:35,619 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:10:35,650 p=22008 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:10:35,659 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:10:36,046 p=22008 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:10:36,055 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:10:36,305 p=22008 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:10:36,314 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:10:36,559 p=22008 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:10:36,570 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:10:36,819 p=22008 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:10:36,828 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:10:36,859 p=22008 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:10:36,867 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:10:37,251 p=22008 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:10:37,261 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:10:37,521 p=22008 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:10:37,530 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:10:37,563 p=22008 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:10:37,563 p=22008 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:10:37,571 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 15:10:37,819 p=22008 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:10:37,829 p=22008 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 15:10:37,868 p=22008 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'bundler_installed.rc != 0' failed. The error was: error while evaluating conditional (bundler_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 79, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Install bundler if not installed'\n  ^ here\n"}
2024-10-20 15:10:37,869 p=22008 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:10:37,878 p=22008 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 15:10:38,128 p=22008 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:10:38,136 p=22008 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 15:10:38,167 p=22008 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rails_installed.stdout != \"true\"' failed. The error was: error while evaluating conditional (rails_installed.stdout != \"true\"): 'dict object' has no attribute 'stdout'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 15:10:38,170 p=22008 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:10:38,170 p=22008 u=ec2-user n=ansible | 18.180.2.113               : ok=11   changed=5    unreachable=0    failed=1    skipped=9    rescued=0    ignored=2   
2024-10-20 15:12:27,258 p=22242 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:12:27,276 p=22242 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:12:28,872 p=22242 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:12:28,883 p=22242 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:12:29,237 p=22242 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:12:29,245 p=22242 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:12:30,081 p=22242 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:12:30,090 p=22242 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:12:30,435 p=22242 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:12:30,444 p=22242 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:12:32,849 p=22242 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:12:32,860 p=22242 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:12:37,552 p=22242 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:12:37,561 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:12:37,575 p=22242 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:12:37,583 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:12:37,832 p=22242 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:12:37,840 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:12:37,875 p=22242 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:12:37,886 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:12:38,278 p=22242 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:12:38,287 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:12:38,553 p=22242 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:12:38,561 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:12:38,809 p=22242 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:12:38,818 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:12:39,071 p=22242 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:12:39,079 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:12:39,111 p=22242 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:12:39,118 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:12:39,510 p=22242 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:12:39,520 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:12:39,779 p=22242 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:12:39,787 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:12:39,821 p=22242 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:12:39,822 p=22242 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:12:39,829 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 15:12:40,068 p=22242 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:12:40,076 p=22242 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 15:12:40,107 p=22242 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'bundler_installed.rc != 0' failed. The error was: error while evaluating conditional (bundler_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 79, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Install bundler if not installed'\n  ^ here\n"}
2024-10-20 15:12:40,108 p=22242 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:12:40,117 p=22242 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 15:12:40,358 p=22242 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:12:40,368 p=22242 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 15:12:40,401 p=22242 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rails_installed.stdout != \"true\"' failed. The error was: error while evaluating conditional (rails_installed.stdout != \"true\"): 'dict object' has no attribute 'stdout'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 15:12:40,401 p=22242 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:12:40,409 p=22242 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 15:12:40,656 p=22242 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:12:40,666 p=22242 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 15:12:40,698 p=22242 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 18, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create build directory\n  ^ here\n"}
2024-10-20 15:12:40,698 p=22242 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:12:40,706 p=22242 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 15:12:40,737 p=22242 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Configure the build\n  ^ here\n"}
2024-10-20 15:12:40,738 p=22242 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:12:40,746 p=22242 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *******************************************************************************************************************************************************************************************
2024-10-20 15:12:40,777 p=22242 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 32, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Build libvips\n  ^ here\n"}
2024-10-20 15:12:40,779 p=22242 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:12:40,779 p=22242 u=ec2-user n=ansible | 18.180.2.113               : ok=14   changed=5    unreachable=0    failed=1    skipped=10   rescued=0    ignored=5   
2024-10-20 15:13:07,852 p=22492 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:13:07,871 p=22492 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:13:09,226 p=22492 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:13:09,236 p=22492 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:13:09,590 p=22492 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:13:09,600 p=22492 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:13:10,432 p=22492 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:13:10,441 p=22492 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:13:10,786 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:10,794 p=22492 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:13:13,127 p=22492 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:13:13,138 p=22492 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:13:17,842 p=22492 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:13:17,851 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:13:17,868 p=22492 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:13:17,876 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:13:18,135 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:18,144 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:13:18,175 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:18,184 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:13:18,564 p=22492 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:13:18,572 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:13:18,825 p=22492 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:13:18,835 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:13:19,084 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:19,092 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:13:19,341 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:19,350 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:13:19,381 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:19,389 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:13:19,775 p=22492 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:13:19,785 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:13:20,045 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:20,054 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:13:20,087 p=22492 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:13:20,087 p=22492 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:13:20,095 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 15:13:20,333 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:20,342 p=22492 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 15:13:20,374 p=22492 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'bundler_installed.rc != 0' failed. The error was: error while evaluating conditional (bundler_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 79, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Install bundler if not installed'\n  ^ here\n"}
2024-10-20 15:13:20,375 p=22492 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:13:20,384 p=22492 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 15:13:20,622 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:20,630 p=22492 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 15:13:20,662 p=22492 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rails_installed.stdout != \"true\"' failed. The error was: error while evaluating conditional (rails_installed.stdout != \"true\"): 'dict object' has no attribute 'stdout'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 15:13:20,662 p=22492 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:13:20,671 p=22492 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 15:13:20,904 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:20,914 p=22492 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 15:13:20,947 p=22492 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 18, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create build directory\n  ^ here\n"}
2024-10-20 15:13:20,947 p=22492 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:13:20,956 p=22492 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 15:13:20,988 p=22492 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Configure the build\n  ^ here\n"}
2024-10-20 15:13:20,988 p=22492 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:13:20,998 p=22492 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *******************************************************************************************************************************************************************************************
2024-10-20 15:13:21,033 p=22492 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 32, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Build libvips\n  ^ here\n"}
2024-10-20 15:13:21,034 p=22492 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:13:21,044 p=22492 u=ec2-user n=ansible | TASK [03_rails : Install libvips] *****************************************************************************************************************************************************************************************
2024-10-20 15:13:21,078 p=22492 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 39, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install libvips\n  ^ here\n"}
2024-10-20 15:13:21,078 p=22492 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:13:21,088 p=22492 u=ec2-user n=ansible | TASK [03_rails : Update library cache] ************************************************************************************************************************************************************************************
2024-10-20 15:13:21,328 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:21,337 p=22492 u=ec2-user n=ansible | TASK [04_nodejs : Check if nvm is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:13:21,583 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:21,592 p=22492 u=ec2-user n=ansible | TASK [04_nodejs : Download NVM install script] ****************************************************************************************************************************************************************************
2024-10-20 15:13:21,623 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:21,632 p=22492 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM install script] *********************************************************************************************************************************************************************************
2024-10-20 15:13:21,896 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:21,905 p=22492 u=ec2-user n=ansible | TASK [04_nodejs : Check if NVM is properly installed] *********************************************************************************************************************************************************************
2024-10-20 15:13:22,144 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:22,152 p=22492 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1 if NVM is available] *************************************************************************************************************************************************************
2024-10-20 15:13:22,415 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:22,424 p=22492 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *******************************************************************************************************************************************************************************
2024-10-20 15:13:22,660 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:22,670 p=22492 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] **********************************************************************************************************************************************************************************
2024-10-20 15:13:22,704 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:22,712 p=22492 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ****************************************************************************************************************************************************************************
2024-10-20 15:13:22,742 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:22,751 p=22492 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *****************************************************************************************************************************************************************************************
2024-10-20 15:13:22,993 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:23,002 p=22492 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] ********************************************************************************************************************************************************************************
2024-10-20 15:13:23,254 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:23,262 p=22492 u=ec2-user n=ansible | TASK [06_mysql : Check if MariaDB packages are installed] *****************************************************************************************************************************************************************
2024-10-20 15:13:23,506 p=22492 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:13:23,514 p=22492 u=ec2-user n=ansible | TASK [06_mysql : Set variable if MariaDB packages are found] **************************************************************************************************************************************************************
2024-10-20 15:13:23,546 p=22492 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/06_mysql/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set variable if MariaDB packages are found\n  ^ here\n"}
2024-10-20 15:13:23,548 p=22492 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:13:23,548 p=22492 u=ec2-user n=ansible | 18.180.2.113               : ok=16   changed=5    unreachable=0    failed=1    skipped=22   rescued=0    ignored=7   
2024-10-20 15:15:22,684 p=22898 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:15:22,701 p=22898 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:15:24,220 p=22898 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:15:24,228 p=22898 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:15:24,602 p=22898 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:15:24,611 p=22898 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:15:25,516 p=22898 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:15:25,525 p=22898 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:15:25,877 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:25,887 p=22898 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:15:28,240 p=22898 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:15:28,250 p=22898 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:15:32,954 p=22898 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:15:32,963 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:15:32,979 p=22898 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:15:32,986 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:15:33,233 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:33,242 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:15:33,272 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:33,281 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:15:33,660 p=22898 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:15:33,669 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:15:33,915 p=22898 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:15:33,924 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:15:34,170 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:34,179 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:15:34,425 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:34,432 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:15:34,465 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:34,474 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:15:34,866 p=22898 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:15:34,876 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:15:35,137 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:35,145 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:15:35,178 p=22898 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:15:35,179 p=22898 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:15:35,187 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 15:15:35,430 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:35,438 p=22898 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 15:15:35,471 p=22898 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'bundler_installed.rc != 0' failed. The error was: error while evaluating conditional (bundler_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 79, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Install bundler if not installed'\n  ^ here\n"}
2024-10-20 15:15:35,471 p=22898 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:15:35,479 p=22898 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 15:15:35,717 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:35,726 p=22898 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 15:15:35,757 p=22898 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rails_installed.stdout != \"true\"' failed. The error was: error while evaluating conditional (rails_installed.stdout != \"true\"): 'dict object' has no attribute 'stdout'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 15:15:35,757 p=22898 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:15:35,765 p=22898 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 15:15:36,005 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:36,015 p=22898 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 15:15:36,049 p=22898 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 18, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create build directory\n  ^ here\n"}
2024-10-20 15:15:36,049 p=22898 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:15:36,057 p=22898 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 15:15:36,088 p=22898 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Configure the build\n  ^ here\n"}
2024-10-20 15:15:36,088 p=22898 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:15:36,097 p=22898 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *******************************************************************************************************************************************************************************************
2024-10-20 15:15:36,130 p=22898 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 32, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Build libvips\n  ^ here\n"}
2024-10-20 15:15:36,130 p=22898 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:15:36,138 p=22898 u=ec2-user n=ansible | TASK [03_rails : Install libvips] *****************************************************************************************************************************************************************************************
2024-10-20 15:15:36,170 p=22898 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 39, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install libvips\n  ^ here\n"}
2024-10-20 15:15:36,170 p=22898 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:15:36,178 p=22898 u=ec2-user n=ansible | TASK [03_rails : Update library cache] ************************************************************************************************************************************************************************************
2024-10-20 15:15:36,426 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:36,435 p=22898 u=ec2-user n=ansible | TASK [04_nodejs : Check if nvm is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:15:36,671 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:36,681 p=22898 u=ec2-user n=ansible | TASK [04_nodejs : Download NVM install script] ****************************************************************************************************************************************************************************
2024-10-20 15:15:36,712 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:36,720 p=22898 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM install script] *********************************************************************************************************************************************************************************
2024-10-20 15:15:36,985 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:36,993 p=22898 u=ec2-user n=ansible | TASK [04_nodejs : Check if NVM is properly installed] *********************************************************************************************************************************************************************
2024-10-20 15:15:37,233 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:37,242 p=22898 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1 if NVM is available] *************************************************************************************************************************************************************
2024-10-20 15:15:37,504 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:37,512 p=22898 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *******************************************************************************************************************************************************************************
2024-10-20 15:15:37,760 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:37,769 p=22898 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] **********************************************************************************************************************************************************************************
2024-10-20 15:15:37,803 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:37,810 p=22898 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ****************************************************************************************************************************************************************************
2024-10-20 15:15:37,844 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:37,852 p=22898 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *****************************************************************************************************************************************************************************************
2024-10-20 15:15:38,112 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:38,122 p=22898 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] ********************************************************************************************************************************************************************************
2024-10-20 15:15:38,366 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:38,375 p=22898 u=ec2-user n=ansible | TASK [06_mysql : Check if MariaDB packages are installed] *****************************************************************************************************************************************************************
2024-10-20 15:15:38,617 p=22898 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:15:38,625 p=22898 u=ec2-user n=ansible | TASK [06_mysql : Set variable if MariaDB packages are found] **************************************************************************************************************************************************************
2024-10-20 15:15:38,657 p=22898 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/06_mysql/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set variable if MariaDB packages are found\n  ^ here\n"}
2024-10-20 15:15:38,659 p=22898 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:15:38,660 p=22898 u=ec2-user n=ansible | 18.180.2.113               : ok=16   changed=5    unreachable=0    failed=1    skipped=22   rescued=0    ignored=7   
2024-10-20 15:16:30,294 p=23246 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:16:30,311 p=23246 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:16:31,616 p=23246 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:16:31,623 p=23246 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:16:31,982 p=23246 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:16:31,991 p=23246 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:16:32,868 p=23246 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:16:32,877 p=23246 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:16:33,223 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:33,232 p=23246 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:16:35,584 p=23246 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:16:35,594 p=23246 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:16:40,330 p=23246 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:16:40,340 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:16:40,355 p=23246 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:16:40,364 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:16:40,609 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:40,618 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:16:40,648 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:40,655 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:16:41,033 p=23246 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:16:41,044 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:16:41,286 p=23246 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:16:41,295 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:16:41,537 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:41,545 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:16:41,791 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:41,799 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:16:41,830 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:41,839 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:16:42,222 p=23246 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:16:42,232 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:16:42,489 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:42,496 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:16:42,530 p=23246 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:16:42,530 p=23246 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:16:42,539 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 15:16:42,779 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:42,787 p=23246 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 15:16:42,819 p=23246 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'bundler_installed.rc != 0' failed. The error was: error while evaluating conditional (bundler_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 79, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Install bundler if not installed'\n  ^ here\n"}
2024-10-20 15:16:42,819 p=23246 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:16:42,829 p=23246 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 15:16:43,068 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:43,076 p=23246 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 15:16:43,109 p=23246 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rails_installed.stdout != \"true\"' failed. The error was: error while evaluating conditional (rails_installed.stdout != \"true\"): 'dict object' has no attribute 'stdout'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 15:16:43,110 p=23246 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:16:43,119 p=23246 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 15:16:43,361 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:43,369 p=23246 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 15:16:43,401 p=23246 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 18, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create build directory\n  ^ here\n"}
2024-10-20 15:16:43,402 p=23246 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:16:43,411 p=23246 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 15:16:43,442 p=23246 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Configure the build\n  ^ here\n"}
2024-10-20 15:16:43,443 p=23246 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:16:43,451 p=23246 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *******************************************************************************************************************************************************************************************
2024-10-20 15:16:43,484 p=23246 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 32, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Build libvips\n  ^ here\n"}
2024-10-20 15:16:43,484 p=23246 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:16:43,495 p=23246 u=ec2-user n=ansible | TASK [03_rails : Install libvips] *****************************************************************************************************************************************************************************************
2024-10-20 15:16:43,526 p=23246 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 39, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install libvips\n  ^ here\n"}
2024-10-20 15:16:43,526 p=23246 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:16:43,534 p=23246 u=ec2-user n=ansible | TASK [03_rails : Update library cache] ************************************************************************************************************************************************************************************
2024-10-20 15:16:43,772 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:43,780 p=23246 u=ec2-user n=ansible | TASK [04_nodejs : Check if nvm is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:16:44,026 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:44,034 p=23246 u=ec2-user n=ansible | TASK [04_nodejs : Download NVM install script] ****************************************************************************************************************************************************************************
2024-10-20 15:16:44,066 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:44,074 p=23246 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM install script] *********************************************************************************************************************************************************************************
2024-10-20 15:16:44,336 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:44,345 p=23246 u=ec2-user n=ansible | TASK [04_nodejs : Check if NVM is properly installed] *********************************************************************************************************************************************************************
2024-10-20 15:16:44,593 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:44,603 p=23246 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1 if NVM is available] *************************************************************************************************************************************************************
2024-10-20 15:16:44,866 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:44,875 p=23246 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *******************************************************************************************************************************************************************************
2024-10-20 15:16:45,121 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:45,130 p=23246 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] **********************************************************************************************************************************************************************************
2024-10-20 15:16:45,162 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:45,171 p=23246 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ****************************************************************************************************************************************************************************
2024-10-20 15:16:45,201 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:45,209 p=23246 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *****************************************************************************************************************************************************************************************
2024-10-20 15:16:45,448 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:45,456 p=23246 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] ********************************************************************************************************************************************************************************
2024-10-20 15:16:45,705 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:45,713 p=23246 u=ec2-user n=ansible | TASK [06_mysql : Check if MariaDB packages are installed] *****************************************************************************************************************************************************************
2024-10-20 15:16:45,955 p=23246 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:16:45,964 p=23246 u=ec2-user n=ansible | TASK [06_mysql : Set variable if MariaDB packages are found] **************************************************************************************************************************************************************
2024-10-20 15:16:45,995 p=23246 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'stdout'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/06_mysql/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set variable if MariaDB packages are found\n  ^ here\n"}
2024-10-20 15:16:45,997 p=23246 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:16:45,998 p=23246 u=ec2-user n=ansible | 18.180.2.113               : ok=16   changed=5    unreachable=0    failed=1    skipped=22   rescued=0    ignored=7   
2024-10-20 15:17:32,436 p=23592 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:17:32,454 p=23592 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:17:33,749 p=23592 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:17:33,761 p=23592 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:17:34,114 p=23592 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:17:34,122 p=23592 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:17:34,969 p=23592 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:17:34,978 p=23592 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:17:35,347 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:35,358 p=23592 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:17:37,764 p=23592 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:17:37,774 p=23592 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:17:42,498 p=23592 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:17:42,508 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:17:42,522 p=23592 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:17:42,530 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:17:42,777 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:42,785 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:17:42,815 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:42,823 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:17:43,203 p=23592 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:17:43,211 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:17:43,457 p=23592 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:17:43,466 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:17:43,709 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:43,718 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:17:43,963 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:43,971 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:17:44,002 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:44,010 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:17:44,398 p=23592 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:17:44,407 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:17:44,667 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:44,675 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:17:44,709 p=23592 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:17:44,711 p=23592 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:17:44,719 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 15:17:44,958 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:44,966 p=23592 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 15:17:44,999 p=23592 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'bundler_installed.rc != 0' failed. The error was: error while evaluating conditional (bundler_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 79, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Install bundler if not installed'\n  ^ here\n"}
2024-10-20 15:17:45,000 p=23592 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:17:45,007 p=23592 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 15:17:45,254 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:45,263 p=23592 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 15:17:45,294 p=23592 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rails_installed.stdout != \"true\"' failed. The error was: error while evaluating conditional (rails_installed.stdout != \"true\"): 'dict object' has no attribute 'stdout'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 15:17:45,295 p=23592 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:17:45,304 p=23592 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 15:17:45,547 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:45,556 p=23592 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 15:17:45,590 p=23592 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 18, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create build directory\n  ^ here\n"}
2024-10-20 15:17:45,590 p=23592 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:17:45,598 p=23592 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 15:17:45,631 p=23592 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Configure the build\n  ^ here\n"}
2024-10-20 15:17:45,631 p=23592 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:17:45,640 p=23592 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *******************************************************************************************************************************************************************************************
2024-10-20 15:17:45,674 p=23592 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 32, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Build libvips\n  ^ here\n"}
2024-10-20 15:17:45,675 p=23592 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:17:45,681 p=23592 u=ec2-user n=ansible | TASK [03_rails : Install libvips] *****************************************************************************************************************************************************************************************
2024-10-20 15:17:45,713 p=23592 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 39, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install libvips\n  ^ here\n"}
2024-10-20 15:17:45,713 p=23592 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:17:45,721 p=23592 u=ec2-user n=ansible | TASK [03_rails : Update library cache] ************************************************************************************************************************************************************************************
2024-10-20 15:17:45,963 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:45,972 p=23592 u=ec2-user n=ansible | TASK [04_nodejs : Check if nvm is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:17:46,208 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:46,216 p=23592 u=ec2-user n=ansible | TASK [04_nodejs : Download NVM install script] ****************************************************************************************************************************************************************************
2024-10-20 15:17:46,249 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:46,258 p=23592 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM install script] *********************************************************************************************************************************************************************************
2024-10-20 15:17:46,522 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:46,530 p=23592 u=ec2-user n=ansible | TASK [04_nodejs : Check if NVM is properly installed] *********************************************************************************************************************************************************************
2024-10-20 15:17:46,773 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:46,782 p=23592 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1 if NVM is available] *************************************************************************************************************************************************************
2024-10-20 15:17:47,038 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:47,048 p=23592 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *******************************************************************************************************************************************************************************
2024-10-20 15:17:47,291 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:47,299 p=23592 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] **********************************************************************************************************************************************************************************
2024-10-20 15:17:47,330 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:47,339 p=23592 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ****************************************************************************************************************************************************************************
2024-10-20 15:17:47,370 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:47,378 p=23592 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *****************************************************************************************************************************************************************************************
2024-10-20 15:17:47,623 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:47,636 p=23592 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] ********************************************************************************************************************************************************************************
2024-10-20 15:17:47,898 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:47,909 p=23592 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] *********************************************************************************************************************************************************************************
2024-10-20 15:17:48,685 p=23592 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:17:48,695 p=23592 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] ***********************************************************************************************************************************************************************
2024-10-20 15:17:49,741 p=23592 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:17:49,751 p=23592 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] ************************************************************************************************************************************************************************************
2024-10-20 15:17:55,707 p=23592 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:17:55,716 p=23592 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] **************************************************************************************************************************************************************************************
2024-10-20 15:17:55,996 p=23592 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:17:55,996 p=23592 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:17:56,006 p=23592 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] ***********************************************************************************************************************************************************************
2024-10-20 15:17:56,292 p=23592 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:17:56,300 p=23592 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ****************************************************************************************************************************************************************************************
2024-10-20 15:17:56,678 p=23592 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:17:56,687 p=23592 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *******************************************************************************************************************************************************************************************
2024-10-20 15:17:57,499 p=23592 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:17:57,508 p=23592 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] ***************************************************************************************************************************************************************************************
2024-10-20 15:17:57,880 p=23592 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:17:57,890 p=23592 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] *************************************************************************************************************************************************************************************
2024-10-20 15:17:58,599 p=23592 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:17:58,610 p=23592 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] ************************************************************************************************************************************************************************************
2024-10-20 15:17:58,642 p=23592 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:17:58,651 p=23592 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] ************************************************************************************************************************************************************************************
2024-10-20 15:17:58,919 p=23592 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:17:58,920 p=23592 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:17:58,928 p=23592 u=ec2-user n=ansible | TASK [08_app_dev : Generate development.rb from template] *****************************************************************************************************************************************************************
2024-10-20 15:17:59,199 p=23592 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:17:59,209 p=23592 u=ec2-user n=ansible | TASK [08_app_dev : Configure S3 settings in storage.yml] ******************************************************************************************************************************************************************
2024-10-20 15:17:59,309 p=23592 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'access_key_id' is undefined"}
2024-10-20 15:17:59,311 p=23592 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:17:59,312 p=23592 u=ec2-user n=ansible | 18.180.2.113               : ok=27   changed=11   unreachable=0    failed=1    skipped=22   rescued=0    ignored=9   
2024-10-20 15:18:58,865 p=24074 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:18:58,882 p=24074 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:19:00,436 p=24074 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:19:00,445 p=24074 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:19:00,804 p=24074 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:19:00,813 p=24074 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:19:01,667 p=24074 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:01,677 p=24074 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:19:02,027 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:02,037 p=24074 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:19:04,699 p=24074 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:19:04,708 p=24074 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:19:09,443 p=24074 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:09,453 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:19:09,468 p=24074 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:19:09,476 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:19:09,724 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:09,732 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:19:09,764 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:09,772 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:19:10,158 p=24074 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:10,168 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:19:10,411 p=24074 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:10,421 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:19:10,657 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:10,667 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:19:10,907 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:10,916 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:19:10,948 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:10,956 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:19:11,348 p=24074 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:11,359 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:19:11,620 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:11,630 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:19:11,664 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:19:11,664 p=24074 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:19:11,672 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 15:19:11,918 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:11,926 p=24074 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 15:19:11,959 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'bundler_installed.rc != 0' failed. The error was: error while evaluating conditional (bundler_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 79, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Install bundler if not installed'\n  ^ here\n"}
2024-10-20 15:19:11,959 p=24074 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:19:11,967 p=24074 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 15:19:12,212 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:12,220 p=24074 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 15:19:12,251 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rails_installed.stdout != \"true\"' failed. The error was: error while evaluating conditional (rails_installed.stdout != \"true\"): 'dict object' has no attribute 'stdout'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 15:19:12,251 p=24074 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:19:12,260 p=24074 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 15:19:12,505 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:12,513 p=24074 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 15:19:12,555 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 18, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create build directory\n  ^ here\n"}
2024-10-20 15:19:12,557 p=24074 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:19:12,567 p=24074 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 15:19:12,608 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Configure the build\n  ^ here\n"}
2024-10-20 15:19:12,609 p=24074 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:19:12,616 p=24074 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *******************************************************************************************************************************************************************************************
2024-10-20 15:19:12,649 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 32, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Build libvips\n  ^ here\n"}
2024-10-20 15:19:12,649 p=24074 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:19:12,657 p=24074 u=ec2-user n=ansible | TASK [03_rails : Install libvips] *****************************************************************************************************************************************************************************************
2024-10-20 15:19:12,689 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 39, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install libvips\n  ^ here\n"}
2024-10-20 15:19:12,689 p=24074 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:19:12,697 p=24074 u=ec2-user n=ansible | TASK [03_rails : Update library cache] ************************************************************************************************************************************************************************************
2024-10-20 15:19:12,935 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:12,944 p=24074 u=ec2-user n=ansible | TASK [04_nodejs : Check if nvm is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:19:13,192 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:13,201 p=24074 u=ec2-user n=ansible | TASK [04_nodejs : Download NVM install script] ****************************************************************************************************************************************************************************
2024-10-20 15:19:13,232 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:13,240 p=24074 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM install script] *********************************************************************************************************************************************************************************
2024-10-20 15:19:13,507 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:13,516 p=24074 u=ec2-user n=ansible | TASK [04_nodejs : Check if NVM is properly installed] *********************************************************************************************************************************************************************
2024-10-20 15:19:13,763 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:13,771 p=24074 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1 if NVM is available] *************************************************************************************************************************************************************
2024-10-20 15:19:14,037 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:14,049 p=24074 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *******************************************************************************************************************************************************************************
2024-10-20 15:19:14,303 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:14,313 p=24074 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] **********************************************************************************************************************************************************************************
2024-10-20 15:19:14,345 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:14,354 p=24074 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ****************************************************************************************************************************************************************************
2024-10-20 15:19:14,385 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:14,393 p=24074 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *****************************************************************************************************************************************************************************************
2024-10-20 15:19:14,640 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:14,650 p=24074 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] ********************************************************************************************************************************************************************************
2024-10-20 15:19:14,898 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:14,907 p=24074 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] *********************************************************************************************************************************************************************************
2024-10-20 15:19:15,668 p=24074 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:19:15,678 p=24074 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] ***********************************************************************************************************************************************************************
2024-10-20 15:19:16,732 p=24074 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:16,740 p=24074 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] ************************************************************************************************************************************************************************************
2024-10-20 15:19:17,756 p=24074 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:17,766 p=24074 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] **************************************************************************************************************************************************************************************
2024-10-20 15:19:18,042 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:19:18,042 p=24074 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:19:18,052 p=24074 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] ***********************************************************************************************************************************************************************
2024-10-20 15:19:18,341 p=24074 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:18,350 p=24074 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ****************************************************************************************************************************************************************************************
2024-10-20 15:19:18,714 p=24074 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:18,722 p=24074 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *******************************************************************************************************************************************************************************************
2024-10-20 15:19:19,489 p=24074 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:19:19,499 p=24074 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] ***************************************************************************************************************************************************************************************
2024-10-20 15:19:19,866 p=24074 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:19,874 p=24074 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] *************************************************************************************************************************************************************************************
2024-10-20 15:19:20,589 p=24074 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:19:20,599 p=24074 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] ************************************************************************************************************************************************************************************
2024-10-20 15:19:20,632 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:20,641 p=24074 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] ************************************************************************************************************************************************************************************
2024-10-20 15:19:20,908 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:19:20,908 p=24074 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:19:20,918 p=24074 u=ec2-user n=ansible | TASK [08_app_dev : Generate development.rb from template] *****************************************************************************************************************************************************************
2024-10-20 15:19:21,194 p=24074 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:21,203 p=24074 u=ec2-user n=ansible | TASK [08_app_dev : Configure S3 settings in storage.yml] ******************************************************************************************************************************************************************
2024-10-20 15:19:21,311 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'access_key_id' is undefined"}
2024-10-20 15:19:21,312 p=24074 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:19:21,320 p=24074 u=ec2-user n=ansible | TASK [08_app_dev : bin/setup] *********************************************************************************************************************************************************************************************
2024-10-20 15:19:21,594 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:19:21,594 p=24074 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:19:21,602 p=24074 u=ec2-user n=ansible | TASK [08_app_dev : Check if assets are precompiled] ***********************************************************************************************************************************************************************
2024-10-20 15:19:21,869 p=24074 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:21,879 p=24074 u=ec2-user n=ansible | TASK [08_app_dev : asset precompile] **************************************************************************************************************************************************************************************
2024-10-20 15:19:21,922 p=24074 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'assets_check.rc != 0' failed. The error was: error while evaluating conditional (assets_check.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/08_app_dev/tasks/main.yml': line 36, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'asset precompile'\n  ^ here\n"}
2024-10-20 15:19:21,924 p=24074 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:19:21,924 p=24074 u=ec2-user n=ansible | 18.180.2.113               : ok=29   changed=11   unreachable=0    failed=1    skipped=23   rescued=0    ignored=11  
2024-10-20 15:19:50,551 p=24562 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:19:50,568 p=24562 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:19:51,876 p=24562 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:19:51,885 p=24562 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:19:52,255 p=24562 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:19:52,264 p=24562 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:19:53,106 p=24562 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:19:53,115 p=24562 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:19:53,456 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:19:53,465 p=24562 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:19:55,856 p=24562 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:19:55,866 p=24562 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:20:00,556 p=24562 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:00,565 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:20:00,579 p=24562 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:20:00,586 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:20:00,829 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:00,838 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:20:00,870 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:00,879 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:20:01,267 p=24562 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:01,278 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:20:01,546 p=24562 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:01,556 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:20:01,818 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:01,837 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:20:02,111 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:02,121 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:20:02,153 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:02,163 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:20:02,564 p=24562 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:02,574 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:20:02,841 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:02,850 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:20:02,884 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:20:02,885 p=24562 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:02,898 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 15:20:03,142 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:03,151 p=24562 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 15:20:03,185 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'bundler_installed.rc != 0' failed. The error was: error while evaluating conditional (bundler_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 79, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Install bundler if not installed'\n  ^ here\n"}
2024-10-20 15:20:03,186 p=24562 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:03,195 p=24562 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 15:20:03,445 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:03,453 p=24562 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 15:20:03,488 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rails_installed.stdout != \"true\"' failed. The error was: error while evaluating conditional (rails_installed.stdout != \"true\"): 'dict object' has no attribute 'stdout'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 15:20:03,488 p=24562 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:03,496 p=24562 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 15:20:03,739 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:03,748 p=24562 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 15:20:03,781 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 18, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create build directory\n  ^ here\n"}
2024-10-20 15:20:03,781 p=24562 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:03,789 p=24562 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 15:20:03,824 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Configure the build\n  ^ here\n"}
2024-10-20 15:20:03,824 p=24562 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:03,832 p=24562 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *******************************************************************************************************************************************************************************************
2024-10-20 15:20:03,865 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 32, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Build libvips\n  ^ here\n"}
2024-10-20 15:20:03,865 p=24562 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:03,873 p=24562 u=ec2-user n=ansible | TASK [03_rails : Install libvips] *****************************************************************************************************************************************************************************************
2024-10-20 15:20:03,904 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 39, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install libvips\n  ^ here\n"}
2024-10-20 15:20:03,905 p=24562 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:03,913 p=24562 u=ec2-user n=ansible | TASK [03_rails : Update library cache] ************************************************************************************************************************************************************************************
2024-10-20 15:20:04,155 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:04,163 p=24562 u=ec2-user n=ansible | TASK [04_nodejs : Check if nvm is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:20:04,416 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:04,426 p=24562 u=ec2-user n=ansible | TASK [04_nodejs : Download NVM install script] ****************************************************************************************************************************************************************************
2024-10-20 15:20:04,458 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:04,465 p=24562 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM install script] *********************************************************************************************************************************************************************************
2024-10-20 15:20:04,733 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:04,743 p=24562 u=ec2-user n=ansible | TASK [04_nodejs : Check if NVM is properly installed] *********************************************************************************************************************************************************************
2024-10-20 15:20:04,988 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:04,998 p=24562 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1 if NVM is available] *************************************************************************************************************************************************************
2024-10-20 15:20:05,258 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:05,267 p=24562 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *******************************************************************************************************************************************************************************
2024-10-20 15:20:05,510 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:05,519 p=24562 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] **********************************************************************************************************************************************************************************
2024-10-20 15:20:05,550 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:05,560 p=24562 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ****************************************************************************************************************************************************************************
2024-10-20 15:20:05,591 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:05,600 p=24562 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *****************************************************************************************************************************************************************************************
2024-10-20 15:20:05,843 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:05,851 p=24562 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] ********************************************************************************************************************************************************************************
2024-10-20 15:20:06,093 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:06,100 p=24562 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] *********************************************************************************************************************************************************************************
2024-10-20 15:20:06,865 p=24562 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:20:06,873 p=24562 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] ***********************************************************************************************************************************************************************
2024-10-20 15:20:07,927 p=24562 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:07,939 p=24562 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] ************************************************************************************************************************************************************************************
2024-10-20 15:20:08,933 p=24562 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:08,942 p=24562 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] **************************************************************************************************************************************************************************************
2024-10-20 15:20:09,226 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:20:09,227 p=24562 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:09,235 p=24562 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] ***********************************************************************************************************************************************************************
2024-10-20 15:20:09,512 p=24562 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:09,520 p=24562 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ****************************************************************************************************************************************************************************************
2024-10-20 15:20:09,873 p=24562 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:09,883 p=24562 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *******************************************************************************************************************************************************************************************
2024-10-20 15:20:10,638 p=24562 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:20:10,648 p=24562 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] ***************************************************************************************************************************************************************************************
2024-10-20 15:20:11,021 p=24562 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:11,030 p=24562 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] *************************************************************************************************************************************************************************************
2024-10-20 15:20:11,758 p=24562 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:20:11,770 p=24562 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] ************************************************************************************************************************************************************************************
2024-10-20 15:20:11,807 p=24562 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:11,818 p=24562 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] ************************************************************************************************************************************************************************************
2024-10-20 15:20:12,092 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:20:12,092 p=24562 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:12,101 p=24562 u=ec2-user n=ansible | TASK [08_app_dev : Generate development.rb from template] *****************************************************************************************************************************************************************
2024-10-20 15:20:12,376 p=24562 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:12,385 p=24562 u=ec2-user n=ansible | TASK [08_app_dev : Configure S3 settings in storage.yml] ******************************************************************************************************************************************************************
2024-10-20 15:20:12,490 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'access_key_id' is undefined"}
2024-10-20 15:20:12,490 p=24562 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:12,500 p=24562 u=ec2-user n=ansible | TASK [08_app_dev : bin/setup] *********************************************************************************************************************************************************************************************
2024-10-20 15:20:12,762 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:20:12,763 p=24562 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:12,772 p=24562 u=ec2-user n=ansible | TASK [08_app_dev : asset precompile] **************************************************************************************************************************************************************************************
2024-10-20 15:20:13,040 p=24562 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:20:13,042 p=24562 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:20:13,042 p=24562 u=ec2-user n=ansible | 18.180.2.113               : ok=29   changed=11   unreachable=0    failed=1    skipped=22   rescued=0    ignored=11  
2024-10-20 15:20:39,051 p=25052 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:20:39,068 p=25052 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:20:40,378 p=25052 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:20:40,389 p=25052 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:20:40,741 p=25052 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:20:40,749 p=25052 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:20:41,595 p=25052 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:41,604 p=25052 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:20:41,946 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:41,957 p=25052 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:20:44,339 p=25052 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:20:44,350 p=25052 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:20:49,040 p=25052 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:49,052 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:20:49,066 p=25052 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:20:49,074 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:20:49,318 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:49,327 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:20:49,357 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:49,367 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:20:49,749 p=25052 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:49,758 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:20:50,005 p=25052 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:50,014 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:20:50,255 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:50,264 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:20:50,523 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:50,532 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:20:50,564 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:50,571 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:20:50,964 p=25052 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:50,973 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:20:51,238 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:51,247 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:20:51,282 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:20:51,282 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:51,289 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 15:20:51,536 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:51,545 p=25052 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 15:20:51,576 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'bundler_installed.rc != 0' failed. The error was: error while evaluating conditional (bundler_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 79, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Install bundler if not installed'\n  ^ here\n"}
2024-10-20 15:20:51,577 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:51,586 p=25052 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 15:20:51,831 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:51,841 p=25052 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 15:20:51,873 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rails_installed.stdout != \"true\"' failed. The error was: error while evaluating conditional (rails_installed.stdout != \"true\"): 'dict object' has no attribute 'stdout'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 15:20:51,874 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:51,881 p=25052 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 15:20:52,128 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:52,136 p=25052 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 15:20:52,170 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 18, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create build directory\n  ^ here\n"}
2024-10-20 15:20:52,171 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:52,178 p=25052 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 15:20:52,213 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Configure the build\n  ^ here\n"}
2024-10-20 15:20:52,214 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:52,221 p=25052 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *******************************************************************************************************************************************************************************************
2024-10-20 15:20:52,253 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 32, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Build libvips\n  ^ here\n"}
2024-10-20 15:20:52,253 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:52,262 p=25052 u=ec2-user n=ansible | TASK [03_rails : Install libvips] *****************************************************************************************************************************************************************************************
2024-10-20 15:20:52,294 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 39, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install libvips\n  ^ here\n"}
2024-10-20 15:20:52,294 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:52,307 p=25052 u=ec2-user n=ansible | TASK [03_rails : Update library cache] ************************************************************************************************************************************************************************************
2024-10-20 15:20:52,555 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:52,563 p=25052 u=ec2-user n=ansible | TASK [04_nodejs : Check if nvm is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:20:52,804 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:52,813 p=25052 u=ec2-user n=ansible | TASK [04_nodejs : Download NVM install script] ****************************************************************************************************************************************************************************
2024-10-20 15:20:52,844 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:52,854 p=25052 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM install script] *********************************************************************************************************************************************************************************
2024-10-20 15:20:53,123 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:53,133 p=25052 u=ec2-user n=ansible | TASK [04_nodejs : Check if NVM is properly installed] *********************************************************************************************************************************************************************
2024-10-20 15:20:53,376 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:53,384 p=25052 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1 if NVM is available] *************************************************************************************************************************************************************
2024-10-20 15:20:53,645 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:53,655 p=25052 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *******************************************************************************************************************************************************************************
2024-10-20 15:20:53,897 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:53,906 p=25052 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] **********************************************************************************************************************************************************************************
2024-10-20 15:20:53,938 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:53,947 p=25052 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ****************************************************************************************************************************************************************************
2024-10-20 15:20:53,976 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:53,986 p=25052 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *****************************************************************************************************************************************************************************************
2024-10-20 15:20:54,232 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:54,242 p=25052 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] ********************************************************************************************************************************************************************************
2024-10-20 15:20:54,498 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:20:54,506 p=25052 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] *********************************************************************************************************************************************************************************
2024-10-20 15:20:55,268 p=25052 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:20:55,277 p=25052 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] ***********************************************************************************************************************************************************************
2024-10-20 15:20:56,326 p=25052 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:56,336 p=25052 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] ************************************************************************************************************************************************************************************
2024-10-20 15:20:57,302 p=25052 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:57,311 p=25052 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] **************************************************************************************************************************************************************************************
2024-10-20 15:20:57,571 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:20:57,572 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:20:57,580 p=25052 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] ***********************************************************************************************************************************************************************
2024-10-20 15:20:57,858 p=25052 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:57,866 p=25052 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ****************************************************************************************************************************************************************************************
2024-10-20 15:20:58,239 p=25052 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:58,247 p=25052 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *******************************************************************************************************************************************************************************************
2024-10-20 15:20:59,003 p=25052 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:20:59,013 p=25052 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] ***************************************************************************************************************************************************************************************
2024-10-20 15:20:59,377 p=25052 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:20:59,386 p=25052 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] *************************************************************************************************************************************************************************************
2024-10-20 15:21:00,103 p=25052 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:21:00,115 p=25052 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] ************************************************************************************************************************************************************************************
2024-10-20 15:21:00,149 p=25052 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:00,158 p=25052 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] ************************************************************************************************************************************************************************************
2024-10-20 15:21:00,423 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:21:00,423 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:00,432 p=25052 u=ec2-user n=ansible | TASK [08_app_dev : Generate development.rb from template] *****************************************************************************************************************************************************************
2024-10-20 15:21:00,697 p=25052 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:00,705 p=25052 u=ec2-user n=ansible | TASK [08_app_dev : Configure S3 settings in storage.yml] ******************************************************************************************************************************************************************
2024-10-20 15:21:00,807 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'access_key_id' is undefined"}
2024-10-20 15:21:00,807 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:00,816 p=25052 u=ec2-user n=ansible | TASK [08_app_dev : bin/setup] *********************************************************************************************************************************************************************************************
2024-10-20 15:21:01,081 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:21:01,081 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:01,090 p=25052 u=ec2-user n=ansible | TASK [08_app_dev : asset precompile] **************************************************************************************************************************************************************************************
2024-10-20 15:21:01,360 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:21:01,361 p=25052 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:01,369 p=25052 u=ec2-user n=ansible | TASK [08_app_dev : Run database migration] ********************************************************************************************************************************************************************************
2024-10-20 15:21:01,649 p=25052 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:21:01,651 p=25052 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:21:01,652 p=25052 u=ec2-user n=ansible | 18.180.2.113               : ok=30   changed=11   unreachable=0    failed=1    skipped=22   rescued=0    ignored=12  
2024-10-20 15:21:22,774 p=25542 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 15:21:22,791 p=25542 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 15:21:24,095 p=25542 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:21:24,106 p=25542 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 15:21:24,472 p=25542 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:21:24,481 p=25542 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 15:21:25,332 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:25,342 p=25542 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 15:21:25,685 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:25,694 p=25542 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 15:21:28,073 p=25542 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:21:28,083 p=25542 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 15:21:32,795 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:32,804 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 15:21:32,818 p=25542 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:21:32,826 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:21:33,072 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:33,080 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 15:21:33,112 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:33,120 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 15:21:33,501 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:33,512 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 15:21:33,767 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:33,776 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 15:21:34,026 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:34,034 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 15:21:34,284 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:34,293 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 15:21:34,324 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:34,332 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 15:21:34,721 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:34,731 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 15:21:34,991 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:35,001 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 15:21:35,036 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rbenv_installed is defined and rbenv_installed.rc == 0' failed. The error was: error while evaluating conditional (rbenv_installed is defined and rbenv_installed.rc == 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Ruby 3.2.3 as global version\n  ^ here\n"}
2024-10-20 15:21:35,036 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:35,044 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 15:21:35,290 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:35,300 p=25542 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 15:21:35,333 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'bundler_installed.rc != 0' failed. The error was: error while evaluating conditional (bundler_installed.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/02_ruby/tasks/main.yml': line 79, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 'Install bundler if not installed'\n  ^ here\n"}
2024-10-20 15:21:35,333 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:35,342 p=25542 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 15:21:35,592 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:35,600 p=25542 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 15:21:35,632 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'rails_installed.stdout != \"true\"' failed. The error was: error while evaluating conditional (rails_installed.stdout != \"true\"): 'dict object' has no attribute 'stdout'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 15:21:35,632 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:35,640 p=25542 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 15:21:35,891 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:35,900 p=25542 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 15:21:35,934 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 18, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create build directory\n  ^ here\n"}
2024-10-20 15:21:35,935 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:35,943 p=25542 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 15:21:35,979 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Configure the build\n  ^ here\n"}
2024-10-20 15:21:35,980 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:35,988 p=25542 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *******************************************************************************************************************************************************************************************
2024-10-20 15:21:36,026 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 32, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Build libvips\n  ^ here\n"}
2024-10-20 15:21:36,026 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:36,036 p=25542 u=ec2-user n=ansible | TASK [03_rails : Install libvips] *****************************************************************************************************************************************************************************************
2024-10-20 15:21:36,069 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The conditional check 'vips_version.rc != 0' failed. The error was: error while evaluating conditional (vips_version.rc != 0): 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 39, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install libvips\n  ^ here\n"}
2024-10-20 15:21:36,069 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:36,078 p=25542 u=ec2-user n=ansible | TASK [03_rails : Update library cache] ************************************************************************************************************************************************************************************
2024-10-20 15:21:36,328 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:36,337 p=25542 u=ec2-user n=ansible | TASK [04_nodejs : Check if nvm is installed] ******************************************************************************************************************************************************************************
2024-10-20 15:21:36,587 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:36,596 p=25542 u=ec2-user n=ansible | TASK [04_nodejs : Download NVM install script] ****************************************************************************************************************************************************************************
2024-10-20 15:21:36,630 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:36,637 p=25542 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM install script] *********************************************************************************************************************************************************************************
2024-10-20 15:21:36,910 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:36,918 p=25542 u=ec2-user n=ansible | TASK [04_nodejs : Check if NVM is properly installed] *********************************************************************************************************************************************************************
2024-10-20 15:21:37,164 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:37,173 p=25542 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1 if NVM is available] *************************************************************************************************************************************************************
2024-10-20 15:21:37,434 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:37,443 p=25542 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *******************************************************************************************************************************************************************************
2024-10-20 15:21:37,690 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:37,698 p=25542 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] **********************************************************************************************************************************************************************************
2024-10-20 15:21:37,730 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:37,739 p=25542 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ****************************************************************************************************************************************************************************
2024-10-20 15:21:37,769 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:37,778 p=25542 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *****************************************************************************************************************************************************************************************
2024-10-20 15:21:38,025 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:38,035 p=25542 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] ********************************************************************************************************************************************************************************
2024-10-20 15:21:38,280 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:38,288 p=25542 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] *********************************************************************************************************************************************************************************
2024-10-20 15:21:39,046 p=25542 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:21:39,055 p=25542 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] ***********************************************************************************************************************************************************************
2024-10-20 15:21:40,104 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:40,113 p=25542 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] ************************************************************************************************************************************************************************************
2024-10-20 15:21:41,095 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:41,105 p=25542 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] **************************************************************************************************************************************************************************************
2024-10-20 15:21:41,378 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:21:41,379 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:41,388 p=25542 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] ***********************************************************************************************************************************************************************
2024-10-20 15:21:41,679 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:41,688 p=25542 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ****************************************************************************************************************************************************************************************
2024-10-20 15:21:42,045 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:42,054 p=25542 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *******************************************************************************************************************************************************************************************
2024-10-20 15:21:42,816 p=25542 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:21:42,825 p=25542 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] ***************************************************************************************************************************************************************************************
2024-10-20 15:21:43,192 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:43,201 p=25542 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] *************************************************************************************************************************************************************************************
2024-10-20 15:21:43,917 p=25542 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:21:43,928 p=25542 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] ************************************************************************************************************************************************************************************
2024-10-20 15:21:43,961 p=25542 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 15:21:43,970 p=25542 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] ************************************************************************************************************************************************************************************
2024-10-20 15:21:44,240 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:21:44,241 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:44,250 p=25542 u=ec2-user n=ansible | TASK [08_app_dev : Generate development.rb from template] *****************************************************************************************************************************************************************
2024-10-20 15:21:44,515 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:44,524 p=25542 u=ec2-user n=ansible | TASK [08_app_dev : Configure S3 settings in storage.yml] ******************************************************************************************************************************************************************
2024-10-20 15:21:44,626 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'access_key_id' is undefined"}
2024-10-20 15:21:44,626 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:44,635 p=25542 u=ec2-user n=ansible | TASK [08_app_dev : bin/setup] *********************************************************************************************************************************************************************************************
2024-10-20 15:21:44,900 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:21:44,901 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:44,909 p=25542 u=ec2-user n=ansible | TASK [08_app_dev : asset precompile] **************************************************************************************************************************************************************************************
2024-10-20 15:21:45,177 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:21:45,177 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:45,186 p=25542 u=ec2-user n=ansible | TASK [08_app_dev : Run database migration] ********************************************************************************************************************************************************************************
2024-10-20 15:21:45,445 p=25542 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: '/home/ec2-user/raisetech-live8-sample-app'"}
2024-10-20 15:21:45,447 p=25542 u=ec2-user n=ansible | ...ignoring
2024-10-20 15:21:45,456 p=25542 u=ec2-user n=ansible | TASK [08_app_dev : Install Python3 and pip] *******************************************************************************************************************************************************************************
2024-10-20 15:21:46,194 p=25542 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 15:21:46,203 p=25542 u=ec2-user n=ansible | TASK [08_app_dev : Install meson and ninja via pip] ***********************************************************************************************************************************************************************
2024-10-20 15:21:48,023 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:48,034 p=25542 u=ec2-user n=ansible | TASK [08_app_dev : Clone the libvips repository] **************************************************************************************************************************************************************************
2024-10-20 15:21:49,358 p=25542 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 15:21:49,361 p=25542 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 15:21:49,361 p=25542 u=ec2-user n=ansible | 18.180.2.113               : ok=34   changed=13   unreachable=0    failed=0    skipped=22   rescued=0    ignored=13  
2024-10-20 16:43:50,779 p=26389 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 16:43:50,797 p=26389 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 16:43:52,438 p=26389 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 16:43:52,447 p=26389 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 16:43:52,798 p=26389 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 16:43:52,807 p=26389 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 16:43:54,165 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:43:54,174 p=26389 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 16:43:55,069 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:43:55,080 p=26389 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 16:44:04,070 p=26389 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 16:44:04,082 p=26389 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 16:44:23,572 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:44:23,582 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 16:44:23,598 p=26389 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 16:44:23,605 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 16:44:24,250 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "rbenv --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 16:44:24,251 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:44:24,260 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 16:44:26,118 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:44:26,127 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 16:44:27,016 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:44:27,025 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 16:44:27,904 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:44:27,912 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 16:44:29,488 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:44:29,498 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 16:44:30,834 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 16:44:30,834 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:44:30,843 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 16:44:32,711 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:44:32,720 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 16:44:33,437 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:44:33,448 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 16:49:48,863 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:49:48,874 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 16:49:48,907 p=26389 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 16:49:48,917 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 16:49:49,605 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": ["/home/ec2-user/.rbenv/shims/gem", "list", "bundler", "-i"], "delta": "0:00:00.063513", "end": "2024-10-20 16:49:49.533244", "msg": "non-zero return code", "rc": 127, "start": "2024-10-20 16:49:49.469731", "stderr": "rbenv: gem: command not found\n\nThe `gem' command exists in these Ruby versions:\n  3.2.3", "stderr_lines": ["rbenv: gem: command not found", "", "The `gem' command exists in these Ruby versions:", "  3.2.3"], "stdout": "", "stdout_lines": []}
2024-10-20 16:49:49,606 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:49:49,615 p=26389 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 16:49:50,296 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": "bash -lc \"gem install bundler\"", "delta": "0:00:00.139371", "end": "2024-10-20 16:49:50.222141", "msg": "non-zero return code", "rc": 127, "start": "2024-10-20 16:49:50.082770", "stderr": "rbenv: gem: command not found\n\nThe `gem' command exists in these Ruby versions:\n  3.2.3", "stderr_lines": ["rbenv: gem: command not found", "", "The `gem' command exists in these Ruby versions:", "  3.2.3"], "stdout": "", "stdout_lines": []}
2024-10-20 16:49:50,297 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:49:50,306 p=26389 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 16:49:50,835 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": ["/home/ec2-user/.rbenv/shims/gem", "list", "rails", "-i"], "delta": "0:00:00.061582", "end": "2024-10-20 16:49:50.762386", "msg": "non-zero return code", "rc": 127, "start": "2024-10-20 16:49:50.700804", "stderr": "rbenv: gem: command not found\n\nThe `gem' command exists in these Ruby versions:\n  3.2.3", "stderr_lines": ["rbenv: gem: command not found", "", "The `gem' command exists in these Ruby versions:", "  3.2.3"], "stdout": "", "stdout_lines": []}
2024-10-20 16:49:50,836 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:49:50,846 p=26389 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 16:49:50,879 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rails_version' is undefined\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 16:49:50,880 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:49:50,889 p=26389 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 16:49:51,414 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/vips --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 16:49:51,414 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:49:51,424 p=26389 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 16:49:51,945 p=26389 u=ec2-user n=ansible | [WARNING]: Consider using the file module with state=directory rather than running 'mkdir'.  If you need to use command because file is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.

2024-10-20 16:49:51,945 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:49:51,954 p=26389 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 16:49:52,477 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/meson setup build --prefix=/usr/local", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 16:49:52,477 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:49:52,487 p=26389 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *******************************************************************************************************************************************************************************************
2024-10-20 16:49:53,005 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/ninja", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 16:49:53,006 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:49:53,016 p=26389 u=ec2-user n=ansible | TASK [03_rails : Install libvips] *****************************************************************************************************************************************************************************************
2024-10-20 16:49:53,578 p=26389 u=ec2-user n=ansible | [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running sudo

2024-10-20 16:49:53,580 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": ["sudo", "/usr/local/bin/ninja", "install"], "delta": "0:00:00.072538", "end": "2024-10-20 16:49:53.501687", "msg": "non-zero return code", "rc": 1, "start": "2024-10-20 16:49:53.429149", "stderr": "sudo: /usr/local/bin/ninja: command not found", "stderr_lines": ["sudo: /usr/local/bin/ninja: command not found"], "stdout": "", "stdout_lines": []}
2024-10-20 16:49:53,580 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:49:53,589 p=26389 u=ec2-user n=ansible | TASK [03_rails : Update library cache] ************************************************************************************************************************************************************************************
2024-10-20 16:49:54,176 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:49:54,185 p=26389 u=ec2-user n=ansible | TASK [04_nodejs : Check if nvm is installed] ******************************************************************************************************************************************************************************
2024-10-20 16:49:54,758 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "bash -lc \"nvm --version\"", "delta": "0:00:00.106781", "end": "2024-10-20 16:49:54.685321", "msg": "non-zero return code", "rc": 127, "start": "2024-10-20 16:49:54.578540", "stderr": "bash: nvm: command not found", "stderr_lines": ["bash: nvm: command not found"], "stdout": "", "stdout_lines": []}
2024-10-20 16:49:54,758 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:49:54,768 p=26389 u=ec2-user n=ansible | TASK [04_nodejs : Download NVM install script] ****************************************************************************************************************************************************************************
2024-10-20 16:49:56,244 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:49:56,255 p=26389 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM install script] *********************************************************************************************************************************************************************************
2024-10-20 16:49:56,286 p=26389 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 16:49:56,296 p=26389 u=ec2-user n=ansible | TASK [04_nodejs : Check if NVM is properly installed] *********************************************************************************************************************************************************************
2024-10-20 16:49:56,808 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": "export NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"\nnvm --version\n", "delta": "0:00:00.035951", "end": "2024-10-20 16:49:56.734855", "msg": "non-zero return code", "rc": 127, "start": "2024-10-20 16:49:56.698904", "stderr": "/bin/sh: line 2: nvm: command not found", "stderr_lines": ["/bin/sh: line 2: nvm: command not found"], "stdout": "", "stdout_lines": []}
2024-10-20 16:49:56,808 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:49:56,817 p=26389 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1 if NVM is available] *************************************************************************************************************************************************************
2024-10-20 16:49:56,849 p=26389 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 16:49:56,858 p=26389 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *******************************************************************************************************************************************************************************
2024-10-20 16:49:57,435 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "bash -lc \"yarn --version\"", "delta": "0:00:00.107598", "end": "2024-10-20 16:49:57.361661", "msg": "non-zero return code", "rc": 127, "start": "2024-10-20 16:49:57.254063", "stderr": "bash: yarn: command not found", "stderr_lines": ["bash: yarn: command not found"], "stdout": "", "stdout_lines": []}
2024-10-20 16:49:57,435 p=26389 u=ec2-user n=ansible | ...ignoring
2024-10-20 16:49:57,444 p=26389 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] **********************************************************************************************************************************************************************************
2024-10-20 16:49:58,681 p=26389 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 16:49:58,692 p=26389 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ****************************************************************************************************************************************************************************
2024-10-20 16:50:01,323 p=26389 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": "sh /tmp/yarn-installer.sh", "delta": "0:00:02.117195", "end": "2024-10-20 16:50:01.248565", "msg": "non-zero return code", "rc": 1, "start": "2024-10-20 16:49:59.131370", "stderr": "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100    56  100    56    0     0    257      0 --:--:-- --:--:-- --:--:--   258\n\r100    94  100    94    0     0    186      0 --:--:-- --:--:-- --:--:--   186\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n\r100 1218k  100 1218k    0     0  1084k      0  0:00:01  0:00:01 --:--:-- 1084k\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100    61  100    61    0     0    554      0 --:--:-- --:--:-- --:--:--   559\n\r100    99  100    99    0     0    545      0 --:--:-- --:--:-- --:--:--   545\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n\r100   847  100   847    0     0   1095      0 --:--:-- --:--:-- --:--:--  1095\r100   847  100   847    0     0   1095      0 --:--:-- --:--:-- --:--:--     0\ngpg: keyring `/home/ec2-user/.gnupg/secring.gpg' created\ngpg: key 86E50310: public key \"Yarn Packaging <yarn@dan.cx>\" imported\ngpg: Total number processed: 1\ngpg:               imported: 1  (RSA: 1)\ngpg: Signature made Fri 24 May 2024 09:16:26 PM UTC using RSA key ID 86E50310\ngpg: Good signature from \"Yarn Packaging <yarn@dan.cx>\"\ngpg: WARNING: This key is not certified with a trusted signature!\ngpg:          There is no indication that the signature belongs to the owner.\nPrimary key fingerprint: 72EC F46A 56B4 AD39 C907  BBB7 1646 B01B 86E5 0310\nYarn requires Node.js 4.0 or higher to be installed.", "stderr_lines": ["  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current", "                                 Dload  Upload   Total   Spent    Left  Speed", "", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0", "100    56  100    56    0     0    257      0 --:--:-- --:--:-- --:--:--   258", "", "100    94  100    94    0     0    186      0 --:--:-- --:--:-- --:--:--   186", "", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0", "", "100 1218k  100 1218k    0     0  1084k      0  0:00:01  0:00:01 --:--:-- 1084k", "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current", "                                 Dload  Upload   Total   Spent    Left  Speed", "", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0", "100    61  100    61    0     0    554      0 --:--:-- --:--:-- --:--:--   559", "", "100    99  100    99    0     0    545      0 --:--:-- --:--:-- --:--:--   545", "", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0", "", "100   847  100   847    0     0   1095      0 --:--:-- --:--:-- --:--:--  1095", "100   847  100   847    0     0   1095      0 --:--:-- --:--:-- --:--:--     0", "gpg: keyring `/home/ec2-user/.gnupg/secring.gpg' created", "gpg: key 86E50310: public key \"Yarn Packaging <yarn@dan.cx>\" imported", "gpg: Total number processed: 1", "gpg:               imported: 1  (RSA: 1)", "gpg: Signature made Fri 24 May 2024 09:16:26 PM UTC using RSA key ID 86E50310", "gpg: Good signature from \"Yarn Packaging <yarn@dan.cx>\"", "gpg: WARNING: This key is not certified with a trusted signature!", "gpg:          There is no indication that the signature belongs to the owner.", "Primary key fingerprint: 72EC F46A 56B4 AD39 C907  BBB7 1646 B01B 86E5 0310", "Yarn requires Node.js 4.0 or higher to be installed."], "stdout": "\u001b[37mInstalling Yarn!\u001b[0m\n\u001b[36m> Downloading tarball...\u001b[0m\n\u001b[36m> Verifying integrity...\u001b[0m\n\u001b[32m> GPG signature looks good\u001b[0m\n\u001b[36m> Extracting to ~/.yarn...\u001b[0m\n\u001b[36m> Adding to $PATH...\u001b[0m\n\u001b[36m> We've added the following to your /home/ec2-user/.bashrc\n> If this isn't the profile of your current shell then please add the following to your correct profile:\n   \nexport PATH=\"$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH\"\n\u001b[0m\n\u001b[31m> Yarn was installed, but doesn't seem to be working :(.\u001b[0m", "stdout_lines": ["\u001b[37mInstalling Yarn!\u001b[0m", "\u001b[36m> Downloading tarball...\u001b[0m", "\u001b[36m> Verifying integrity...\u001b[0m", "\u001b[32m> GPG signature looks good\u001b[0m", "\u001b[36m> Extracting to ~/.yarn...\u001b[0m", "\u001b[36m> Adding to $PATH...\u001b[0m", "\u001b[36m> We've added the following to your /home/ec2-user/.bashrc", "> If this isn't the profile of your current shell then please add the following to your correct profile:", "   ", "export PATH=\"$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH\"", "\u001b[0m", "\u001b[31m> Yarn was installed, but doesn't seem to be working :(.\u001b[0m"]}
2024-10-20 16:50:01,327 p=26389 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 16:50:01,327 p=26389 u=ec2-user n=ansible | 18.180.2.113               : ok=31   changed=19   unreachable=0    failed=1    skipped=3    rescued=0    ignored=13  
2024-10-20 17:21:56,775 p=27173 u=ec2-user n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: No JSON object could be decoded

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/08_app_dev/tasks/main.yml': line 33, column 8, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

  become: yes
    src: puma.service.j2
       ^ here

2024-10-20 17:24:51,852 p=27226 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 17:24:51,871 p=27226 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 17:24:53,727 p=27226 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:24:53,735 p=27226 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 17:24:54,393 p=27226 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:24:54,403 p=27226 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 17:24:54,434 p=27226 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 17:24:54,443 p=27226 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 17:24:56,418 p=27226 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:24:56,427 p=27226 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 17:25:05,614 p=27226 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:25:05,625 p=27226 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 17:25:07,254 p=27226 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:25:07,264 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 17:25:07,278 p=27226 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:25:07,286 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 17:25:07,833 p=27226 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:25:07,842 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 17:25:07,879 p=27226 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 17:25:07,888 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 17:25:08,515 p=27226 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:25:08,525 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 17:25:09,005 p=27226 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:25:09,015 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 17:25:09,594 p=27226 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:25:09,603 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 17:25:10,113 p=27226 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 17:25:10,113 p=27226 u=ec2-user n=ansible | ...ignoring
2024-10-20 17:25:10,122 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 17:25:12,185 p=27226 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:25:12,195 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 17:25:12,828 p=27226 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:25:12,838 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 17:25:13,424 p=27226 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:25:13,433 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 17:25:13,975 p=27226 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:25:13,984 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 17:25:14,976 p=27226 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:25:14,986 p=27226 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 17:25:15,017 p=27226 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 17:25:15,025 p=27226 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 17:25:15,771 p=27226 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": ["/home/ec2-user/.rbenv/shims/gem", "list", "rails", "-i"], "delta": "0:00:00.242316", "end": "2024-10-20 17:25:15.696516", "msg": "non-zero return code", "rc": 1, "start": "2024-10-20 17:25:15.454200", "stderr": "", "stderr_lines": [], "stdout": "false", "stdout_lines": ["false"]}
2024-10-20 17:25:15,772 p=27226 u=ec2-user n=ansible | ...ignoring
2024-10-20 17:25:15,781 p=27226 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 17:25:15,815 p=27226 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rails_version' is undefined\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-20 17:25:15,815 p=27226 u=ec2-user n=ansible | ...ignoring
2024-10-20 17:25:15,825 p=27226 u=ec2-user n=ansible | TASK [03_rails : Install Python3 and pip3] ********************************************************************************************************************************************************************************
2024-10-20 17:25:16,937 p=27226 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:25:16,947 p=27226 u=ec2-user n=ansible | TASK [03_rails : Install ninja via pip] ***********************************************************************************************************************************************************************************
2024-10-20 17:25:18,956 p=27226 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:25:18,966 p=27226 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 17:25:19,488 p=27226 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/vips --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 17:25:19,489 p=27226 u=ec2-user n=ansible | ...ignoring
2024-10-20 17:25:19,497 p=27226 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 17:25:20,142 p=27226 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:25:20,153 p=27226 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 17:25:20,683 p=27226 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/meson setup build --prefix=/usr/local", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 17:25:20,686 p=27226 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 17:25:20,686 p=27226 u=ec2-user n=ansible | 18.180.2.113               : ok=22   changed=9    unreachable=0    failed=1    skipped=3    rescued=0    ignored=4   
2024-10-20 17:45:29,523 p=27676 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 17:45:29,542 p=27676 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 17:45:31,626 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:31,637 p=27676 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 17:45:32,311 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:32,321 p=27676 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 17:45:32,353 p=27676 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 17:45:32,361 p=27676 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 17:45:34,391 p=27676 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:45:34,402 p=27676 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 17:45:43,752 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:43,763 p=27676 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 17:45:45,440 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:45,450 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 17:45:45,465 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:45,472 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 17:45:46,051 p=27676 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:45:46,061 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 17:45:46,092 p=27676 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 17:45:46,099 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 17:45:46,714 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:46,724 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 17:45:47,205 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:47,214 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 17:45:47,791 p=27676 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:45:47,801 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 17:45:48,328 p=27676 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 17:45:48,328 p=27676 u=ec2-user n=ansible | ...ignoring
2024-10-20 17:45:48,337 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 17:45:49,876 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:49,891 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 17:45:50,529 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:50,540 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 17:45:51,123 p=27676 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:45:51,133 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 17:45:51,674 p=27676 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:45:51,682 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 17:45:52,480 p=27676 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:45:52,489 p=27676 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 17:45:52,521 p=27676 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 17:45:52,530 p=27676 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 17:45:53,303 p=27676 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:45:53,312 p=27676 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 17:45:53,345 p=27676 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 17:45:53,353 p=27676 u=ec2-user n=ansible | TASK [03_rails : Install Python3 and pip3] ********************************************************************************************************************************************************************************
2024-10-20 17:45:54,467 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:54,476 p=27676 u=ec2-user n=ansible | TASK [03_rails : Install ninja via pip] ***********************************************************************************************************************************************************************************
2024-10-20 17:45:56,246 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:56,257 p=27676 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 17:45:56,789 p=27676 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/vips --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 17:45:56,789 p=27676 u=ec2-user n=ansible | ...ignoring
2024-10-20 17:45:56,799 p=27676 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 17:45:57,453 p=27676 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:45:57,463 p=27676 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 17:45:57,996 p=27676 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/meson setup build --prefix=/usr/local", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 17:45:57,998 p=27676 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 17:45:57,998 p=27676 u=ec2-user n=ansible | 18.180.2.113               : ok=21   changed=7    unreachable=0    failed=1    skipped=4    rescued=0    ignored=2   
2024-10-20 17:50:40,060 p=28032 u=ec2-user n=ansible | PLAY [all] ****************************************************************************************************************************************************************************************************************
2024-10-20 17:50:40,079 p=28032 u=ec2-user n=ansible | TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************
2024-10-20 17:50:41,899 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:50:41,914 p=28032 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] ***************************************************************************************************************************************************************
2024-10-20 17:50:42,576 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:50:42,587 p=28032 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] ************************************************************************************************************************************************************************************
2024-10-20 17:50:42,617 p=28032 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 17:50:42,627 p=28032 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *****************************************************************************************************************************************************************************************
2024-10-20 17:50:43,756 p=28032 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:50:43,766 p=28032 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ***********************************************************************************************************************************************************************
2024-10-20 17:50:52,689 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:50:52,700 p=28032 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *******************************************************************************************************************************************************************************
2024-10-20 17:50:54,353 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:50:54,365 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *******************************************************************************************************************************************************************************************
2024-10-20 17:50:54,379 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:50:54,388 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ******************************************************************************************************************************************************************************
2024-10-20 17:50:54,917 p=28032 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:50:54,927 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *****************************************************************************************************************************************************************************
2024-10-20 17:50:54,959 p=28032 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 17:50:54,968 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *****************************************************************************************************************************************************************************
2024-10-20 17:50:55,574 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:50:55,583 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ********************************************************************************************************************************************************************************
2024-10-20 17:50:56,059 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:50:56,069 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *******************************************************************************************************************************************************************************************
2024-10-20 17:50:56,654 p=28032 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:50:56,664 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] *************************************************************************************************************************************************************************
2024-10-20 17:50:57,192 p=28032 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 17:50:57,193 p=28032 u=ec2-user n=ansible | ...ignoring
2024-10-20 17:50:57,201 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] ************************************************************************************************************************************************************************
2024-10-20 17:50:58,712 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:50:58,724 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] ***************************************************************************************************************************************************************************
2024-10-20 17:50:59,370 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:50:59,381 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] *************************************************************************************************************************************************************
2024-10-20 17:50:59,959 p=28032 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:50:59,968 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] *************************************************************************************************************************************************************************
2024-10-20 17:51:00,540 p=28032 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:51:00,549 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ****************************************************************************************************************************************************************************
2024-10-20 17:51:01,414 p=28032 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:51:01,424 p=28032 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] *************************************************************************************************************************************************************************
2024-10-20 17:51:01,459 p=28032 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 17:51:01,468 p=28032 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *****************************************************************************************************************************************************************************
2024-10-20 17:51:02,312 p=28032 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-20 17:51:02,322 p=28032 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] **************************************************************************************************************************************************************************
2024-10-20 17:51:02,355 p=28032 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-20 17:51:02,364 p=28032 u=ec2-user n=ansible | TASK [03_rails : Install Python3 and pip3] ********************************************************************************************************************************************************************************
2024-10-20 17:51:03,498 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:51:03,508 p=28032 u=ec2-user n=ansible | TASK [03_rails : Install ninja via pip] ***********************************************************************************************************************************************************************************
2024-10-20 17:51:05,127 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:51:05,137 p=28032 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *****************************************************************************************************************************************************************************
2024-10-20 17:51:05,652 p=28032 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/vips --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 17:51:05,653 p=28032 u=ec2-user n=ansible | ...ignoring
2024-10-20 17:51:05,660 p=28032 u=ec2-user n=ansible | TASK [03_rails : Create build directory] **********************************************************************************************************************************************************************************
2024-10-20 17:51:06,291 p=28032 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-20 17:51:06,303 p=28032 u=ec2-user n=ansible | TASK [03_rails : Configure the build] *************************************************************************************************************************************************************************************
2024-10-20 17:51:06,832 p=28032 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/meson setup build --prefix=/usr/local", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-20 17:51:06,833 p=28032 u=ec2-user n=ansible | PLAY RECAP ****************************************************************************************************************************************************************************************************************
2024-10-20 17:51:06,834 p=28032 u=ec2-user n=ansible | 18.180.2.113               : ok=21   changed=7    unreachable=0    failed=1    skipped=4    rescued=0    ignored=2   
2024-10-21 04:36:26,470 p=10314 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 04:36:26,486 p=10314 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 04:36:27,973 p=10314 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 04:36:27,984 p=10314 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 04:36:28,353 p=10314 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 04:36:28,364 p=10314 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 04:36:29,627 p=10314 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 04:36:29,636 p=10314 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] *******************************************************************************************
2024-10-21 04:36:30,489 p=10314 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 04:36:30,497 p=10314 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 04:36:38,595 p=10314 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 04:36:38,607 p=10314 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 04:36:57,020 p=10314 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 04:36:57,024 p=10314 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 04:36:57,025 p=10314 u=ec2-user n=ansible | 18.180.2.113               : ok=6    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2024-10-21 05:16:11,389 p=11721 u=ec2-user n=ansible | PLAY [all] ***********************************************************************************************************************************************************************************************************************
2024-10-21 05:16:11,409 p=11721 u=ec2-user n=ansible | TASK [Gathering Facts] ***********************************************************************************************************************************************************************************************************
2024-10-21 05:16:13,412 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:13,423 p=11721 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] **********************************************************************************************************************************************************************
2024-10-21 05:16:14,070 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:14,081 p=11721 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] *******************************************************************************************************************************************************************************************
2024-10-21 05:16:14,113 p=11721 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 05:16:14,122 p=11721 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] ************************************************************************************************************************************************************************************************
2024-10-21 05:16:15,259 p=11721 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:16:15,271 p=11721 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ******************************************************************************************************************************************************************************
2024-10-21 05:16:23,600 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:23,611 p=11721 u=ec2-user n=ansible | TASK [01_setup : Install required packages] **************************************************************************************************************************************************************************************
2024-10-21 05:16:24,932 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:24,942 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] **************************************************************************************************************************************************************************************************
2024-10-21 05:16:24,956 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:24,965 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] *************************************************************************************************************************************************************************************
2024-10-21 05:16:25,510 p=11721 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:16:25,520 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] ************************************************************************************************************************************************************************************
2024-10-21 05:16:25,551 p=11721 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 05:16:25,559 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] ************************************************************************************************************************************************************************************
2024-10-21 05:16:26,168 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:26,178 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ***************************************************************************************************************************************************************************************
2024-10-21 05:16:26,628 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:26,637 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] **************************************************************************************************************************************************************************************************
2024-10-21 05:16:27,201 p=11721 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:16:27,211 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ********************************************************************************************************************************************************************************
2024-10-21 05:16:27,700 p=11721 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 05:16:27,700 p=11721 u=ec2-user n=ansible | ...ignoring
2024-10-21 05:16:27,710 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] *******************************************************************************************************************************************************************************
2024-10-21 05:16:29,706 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:29,715 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] **********************************************************************************************************************************************************************************
2024-10-21 05:16:30,324 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:30,336 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ********************************************************************************************************************************************************************
2024-10-21 05:16:30,899 p=11721 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:16:30,909 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ********************************************************************************************************************************************************************************
2024-10-21 05:16:31,449 p=11721 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:16:31,459 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ***********************************************************************************************************************************************************************************
2024-10-21 05:16:32,427 p=11721 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:16:32,436 p=11721 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ********************************************************************************************************************************************************************************
2024-10-21 05:16:32,469 p=11721 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 05:16:32,478 p=11721 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] ************************************************************************************************************************************************************************************
2024-10-21 05:16:33,251 p=11721 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": "bash -lc \"/home/ec2-user/.rbenv/shims/gem list rails -i\"\n", "delta": "0:00:00.300903", "end": "2024-10-21 05:16:33.180342", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 05:16:32.879439", "stderr": "", "stderr_lines": [], "stdout": "false", "stdout_lines": ["false"]}
2024-10-21 05:16:33,252 p=11721 u=ec2-user n=ansible | ...ignoring
2024-10-21 05:16:33,261 p=11721 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] *********************************************************************************************************************************************************************************
2024-10-21 05:16:33,295 p=11721 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rails_version' is undefined\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 8, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-21 05:16:33,295 p=11721 u=ec2-user n=ansible | ...ignoring
2024-10-21 05:16:33,303 p=11721 u=ec2-user n=ansible | TASK [03_rails : Install Python3 and pip3] ***************************************************************************************************************************************************************************************
2024-10-21 05:16:34,401 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:34,410 p=11721 u=ec2-user n=ansible | TASK [03_rails : Install ninja via pip] ******************************************************************************************************************************************************************************************
2024-10-21 05:16:35,541 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:35,552 p=11721 u=ec2-user n=ansible | TASK [03_rails : Install meson via pip] ******************************************************************************************************************************************************************************************
2024-10-21 05:16:37,444 p=11721 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:16:37,454 p=11721 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] ************************************************************************************************************************************************************************************
2024-10-21 05:16:37,957 p=11721 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/vips --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 05:16:37,957 p=11721 u=ec2-user n=ansible | ...ignoring
2024-10-21 05:16:37,966 p=11721 u=ec2-user n=ansible | TASK [03_rails : Create build directory] *****************************************************************************************************************************************************************************************
2024-10-21 05:16:38,596 p=11721 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:16:38,608 p=11721 u=ec2-user n=ansible | TASK [03_rails : Configure the build] ********************************************************************************************************************************************************************************************
2024-10-21 05:16:39,127 p=11721 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/meson setup build --prefix=/usr/local", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 05:16:39,130 p=11721 u=ec2-user n=ansible | PLAY RECAP ***********************************************************************************************************************************************************************************************************************
2024-10-21 05:16:39,130 p=11721 u=ec2-user n=ansible | 18.180.2.113               : ok=23   changed=8    unreachable=0    failed=1    skipped=3    rescued=0    ignored=4   
2024-10-21 05:21:48,434 p=12064 u=ec2-user n=ansible | PLAY [all] ***********************************************************************************************************************************************************************************************************************
2024-10-21 05:21:48,455 p=12064 u=ec2-user n=ansible | TASK [Gathering Facts] ***********************************************************************************************************************************************************************************************************
2024-10-21 05:21:50,176 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:21:50,186 p=12064 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] **********************************************************************************************************************************************************************
2024-10-21 05:21:50,843 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:21:50,853 p=12064 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] *******************************************************************************************************************************************************************************************
2024-10-21 05:21:50,885 p=12064 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 05:21:50,894 p=12064 u=ec2-user n=ansible | TASK [01_setup : Clean YUM cache] ************************************************************************************************************************************************************************************************
2024-10-21 05:21:51,976 p=12064 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:21:51,986 p=12064 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] ******************************************************************************************************************************************************************************
2024-10-21 05:22:00,271 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:22:00,285 p=12064 u=ec2-user n=ansible | TASK [01_setup : Install required packages] **************************************************************************************************************************************************************************************
2024-10-21 05:22:01,675 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:22:01,685 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] **************************************************************************************************************************************************************************************************
2024-10-21 05:22:01,699 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:22:01,707 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] *************************************************************************************************************************************************************************************
2024-10-21 05:22:02,229 p=12064 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:22:02,237 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] ************************************************************************************************************************************************************************************
2024-10-21 05:22:02,269 p=12064 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 05:22:02,279 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] ************************************************************************************************************************************************************************************
2024-10-21 05:22:02,891 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:22:02,901 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] ***************************************************************************************************************************************************************************************
2024-10-21 05:22:03,377 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:22:03,387 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] **************************************************************************************************************************************************************************************************
2024-10-21 05:22:03,954 p=12064 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:22:03,964 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ********************************************************************************************************************************************************************************
2024-10-21 05:22:04,471 p=12064 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 05:22:04,471 p=12064 u=ec2-user n=ansible | ...ignoring
2024-10-21 05:22:04,480 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] *******************************************************************************************************************************************************************************
2024-10-21 05:22:05,933 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:22:05,944 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] **********************************************************************************************************************************************************************************
2024-10-21 05:22:06,552 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:22:06,562 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ********************************************************************************************************************************************************************
2024-10-21 05:22:07,119 p=12064 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:22:07,129 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ********************************************************************************************************************************************************************************
2024-10-21 05:22:07,662 p=12064 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:22:07,671 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ***********************************************************************************************************************************************************************************
2024-10-21 05:22:08,362 p=12064 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 05:22:08,373 p=12064 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ********************************************************************************************************************************************************************************
2024-10-21 05:22:08,404 p=12064 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 05:22:08,414 p=12064 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] ************************************************************************************************************************************************************************************
2024-10-21 05:22:09,187 p=12064 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": "bash -lc \"/home/ec2-user/.rbenv/shims/gem list rails -i\"\n", "delta": "0:00:00.300633", "end": "2024-10-21 05:22:09.113936", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 05:22:08.813303", "stderr": "", "stderr_lines": [], "stdout": "false", "stdout_lines": ["false"]}
2024-10-21 05:22:09,188 p=12064 u=ec2-user n=ansible | ...ignoring
2024-10-21 05:22:09,197 p=12064 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] *********************************************************************************************************************************************************************************
2024-10-21 05:22:09,231 p=12064 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rails_version' is undefined\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 8, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-21 05:22:09,231 p=12064 u=ec2-user n=ansible | ...ignoring
2024-10-21 05:22:09,241 p=12064 u=ec2-user n=ansible | TASK [03_rails : Install Python3 and pip3] ***************************************************************************************************************************************************************************************
2024-10-21 05:22:10,328 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:22:10,340 p=12064 u=ec2-user n=ansible | TASK [03_rails : Install ninja via pip] ******************************************************************************************************************************************************************************************
2024-10-21 05:22:11,460 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:22:11,470 p=12064 u=ec2-user n=ansible | TASK [03_rails : Install meson via pip] ******************************************************************************************************************************************************************************************
2024-10-21 05:22:12,445 p=12064 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 05:22:12,455 p=12064 u=ec2-user n=ansible | TASK [03_rails : Check meson installation] ***************************************************************************************************************************************************************************************
2024-10-21 05:22:12,959 p=12064 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": ["which", "meson"], "delta": "0:00:00.038511", "end": "2024-10-21 05:22:12.889435", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 05:22:12.850924", "stderr": "which: no meson in (/home/ec2-user/.rbenv/shims:/home/ec2-user/.rbenv/bin:/usr/local/bin:/usr/bin)", "stderr_lines": ["which: no meson in (/home/ec2-user/.rbenv/shims:/home/ec2-user/.rbenv/bin:/usr/local/bin:/usr/bin)"], "stdout": "", "stdout_lines": []}
2024-10-21 05:22:12,962 p=12064 u=ec2-user n=ansible | PLAY RECAP ***********************************************************************************************************************************************************************************************************************
2024-10-21 05:22:12,962 p=12064 u=ec2-user n=ansible | 18.180.2.113               : ok=21   changed=7    unreachable=0    failed=1    skipped=3    rescued=0    ignored=3   
2024-10-21 06:06:08,316 p=12627 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:06:08,335 p=12627 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:06:10,262 p=12627 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:06:10,273 p=12627 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:06:13,072 p=12627 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:06:13,084 p=12627 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:06:14,427 p=12627 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "No package matching 'build-essential' found available, installed or updated", "rc": 126, "results": ["git-2.40.1-1.amzn2.0.3.x86_64 providing git is already installed", "gcc-7.3.1-17.amzn2.x86_64 providing gcc is already installed", "gcc-c++-7.3.1-17.amzn2.x86_64 providing gcc-c++ is already installed", "1:make-3.82-24.amzn2.x86_64 providing make is already installed", "1:openssl-devel-1.0.2k-24.amzn2.0.13.x86_64 providing openssl-devel is already installed", "libyaml-devel-0.1.4-11.amzn2.0.2.x86_64 providing libyaml-devel is already installed", "readline-devel-6.2-10.amzn2.0.2.x86_64 providing readline-devel is already installed", "zlib-devel-1.2.7-19.amzn2.0.3.x86_64 providing zlib-devel is already installed", "libxml2-devel-2.9.1-6.amzn2.5.13.x86_64 providing libxml2-devel is already installed", "libxslt-devel-1.1.28-6.amzn2.x86_64 providing libxslt-devel is already installed", "sqlite-devel-3.7.17-8.amzn2.1.2.x86_64 providing sqlite-devel is already installed", "libffi-devel-3.0.13-18.amzn2.0.2.x86_64 providing libffi-devel is already installed", "glib2-devel-2.56.1-9.amzn2.0.8.x86_64 providing glib2-devel is already installed", "1:pkgconfig-0.27.1-4.amzn2.0.2.x86_64 providing pkgconfig is already installed", "gobject-introspection-devel-1.56.1-1.amzn2.x86_64 providing gobject-introspection-devel is already installed", "No package matching 'build-essential' found available, installed or updated"]}
2024-10-21 06:06:14,430 p=12627 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:06:14,431 p=12627 u=ec2-user n=ansible | 18.180.2.113               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-10-21 06:07:33,276 p=12725 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:07:33,296 p=12725 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:07:34,970 p=12725 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:07:34,980 p=12725 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:07:37,654 p=12725 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:07:37,663 p=12725 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:07:38,924 p=12725 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "No package matching 'pkg-config' found available, installed or updated", "rc": 126, "results": ["git-2.40.1-1.amzn2.0.3.x86_64 providing git is already installed", "gcc-7.3.1-17.amzn2.x86_64 providing gcc is already installed", "gcc-c++-7.3.1-17.amzn2.x86_64 providing gcc-c++ is already installed", "1:make-3.82-24.amzn2.x86_64 providing make is already installed", "1:openssl-devel-1.0.2k-24.amzn2.0.13.x86_64 providing openssl-devel is already installed", "libyaml-devel-0.1.4-11.amzn2.0.2.x86_64 providing libyaml-devel is already installed", "readline-devel-6.2-10.amzn2.0.2.x86_64 providing readline-devel is already installed", "zlib-devel-1.2.7-19.amzn2.0.3.x86_64 providing zlib-devel is already installed", "libxml2-devel-2.9.1-6.amzn2.5.13.x86_64 providing libxml2-devel is already installed", "libxslt-devel-1.1.28-6.amzn2.x86_64 providing libxslt-devel is already installed", "sqlite-devel-3.7.17-8.amzn2.1.2.x86_64 providing sqlite-devel is already installed", "libffi-devel-3.0.13-18.amzn2.0.2.x86_64 providing libffi-devel is already installed", "glib2-devel-2.56.1-9.amzn2.0.8.x86_64 providing glib2-devel is already installed", "1:pkgconfig-0.27.1-4.amzn2.0.2.x86_64 providing pkgconfig is already installed", "gobject-introspection-devel-1.56.1-1.amzn2.x86_64 providing gobject-introspection-devel is already installed", "No package matching 'pkg-config' found available, installed or updated"]}
2024-10-21 06:07:38,928 p=12725 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:07:38,928 p=12725 u=ec2-user n=ansible | 18.180.2.113               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-10-21 06:08:13,051 p=12814 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:08:13,071 p=12814 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:08:14,595 p=12814 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:08:14,605 p=12814 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:08:17,268 p=12814 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:08:17,279 p=12814 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:08:20,948 p=12814 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "No package matching 'meson' found available, installed or updated", "rc": 126, "results": ["git-2.40.1-1.amzn2.0.3.x86_64 providing git is already installed", "gcc-7.3.1-17.amzn2.x86_64 providing gcc is already installed", "gcc-c++-7.3.1-17.amzn2.x86_64 providing gcc-c++ is already installed", "1:make-3.82-24.amzn2.x86_64 providing make is already installed", "1:openssl-devel-1.0.2k-24.amzn2.0.13.x86_64 providing openssl-devel is already installed", "libyaml-devel-0.1.4-11.amzn2.0.2.x86_64 providing libyaml-devel is already installed", "readline-devel-6.2-10.amzn2.0.2.x86_64 providing readline-devel is already installed", "zlib-devel-1.2.7-19.amzn2.0.3.x86_64 providing zlib-devel is already installed", "libxml2-devel-2.9.1-6.amzn2.5.13.x86_64 providing libxml2-devel is already installed", "libxslt-devel-1.1.28-6.amzn2.x86_64 providing libxslt-devel is already installed", "sqlite-devel-3.7.17-8.amzn2.1.2.x86_64 providing sqlite-devel is already installed", "libffi-devel-3.0.13-18.amzn2.0.2.x86_64 providing libffi-devel is already installed", "glib2-devel-2.56.1-9.amzn2.0.8.x86_64 providing glib2-devel is already installed", "1:pkgconfig-0.27.1-4.amzn2.0.2.x86_64 providing pkgconfig is already installed", "gobject-introspection-devel-1.56.1-1.amzn2.x86_64 providing gobject-introspection-devel is already installed", "No package matching 'meson' found available, installed or updated"]}
2024-10-21 06:08:20,952 p=12814 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:08:20,952 p=12814 u=ec2-user n=ansible | 18.180.2.113               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-10-21 06:09:11,837 p=12905 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:09:11,857 p=12905 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:09:13,395 p=12905 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:09:13,407 p=12905 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:09:16,093 p=12905 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:09:16,102 p=12905 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:09:35,572 p=12905 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:09:35,582 p=12905 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:09:36,919 p=12905 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:09:36,931 p=12905 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:09:36,965 p=12905 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:09:36,973 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:09:36,988 p=12905 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:09:36,998 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:09:38,807 p=12905 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:09:38,817 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:09:38,850 p=12905 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:09:38,859 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:09:40,309 p=12905 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:09:40,319 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:09:41,578 p=12905 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:09:41,596 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:09:42,229 p=12905 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:09:42,238 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:09:42,739 p=12905 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:09:42,740 p=12905 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:09:42,748 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:09:44,162 p=12905 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:09:44,172 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:09:44,781 p=12905 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:09:44,790 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:09:45,357 p=12905 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:09:45,366 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:09:45,895 p=12905 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:09:45,905 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:09:46,608 p=12905 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:09:46,617 p=12905 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:09:46,650 p=12905 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:09:46,659 p=12905 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:09:47,431 p=12905 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": "bash -lc \"/home/ec2-user/.rbenv/shims/gem list rails -i\"\n", "delta": "0:00:00.303003", "end": "2024-10-21 06:09:47.360632", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 06:09:47.057629", "stderr": "", "stderr_lines": [], "stdout": "false", "stdout_lines": ["false"]}
2024-10-21 06:09:47,432 p=12905 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:09:47,441 p=12905 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] ****************************************************************************
2024-10-21 06:09:47,474 p=12905 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rails_version' is undefined\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 8, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-21 06:09:47,474 p=12905 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:09:47,483 p=12905 u=ec2-user n=ansible | TASK [03_rails : Install Python3 and pip3] **********************************************************************************
2024-10-21 06:09:48,600 p=12905 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:09:48,609 p=12905 u=ec2-user n=ansible | TASK [03_rails : Install ninja via pip] *************************************************************************************
2024-10-21 06:09:49,717 p=12905 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:09:49,727 p=12905 u=ec2-user n=ansible | TASK [03_rails : Verify libvips installation] *******************************************************************************
2024-10-21 06:09:50,252 p=12905 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "vips --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:09:50,252 p=12905 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:09:50,262 p=12905 u=ec2-user n=ansible | TASK [03_rails : Create build directory] ************************************************************************************
2024-10-21 06:09:50,916 p=12905 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:09:50,926 p=12905 u=ec2-user n=ansible | TASK [03_rails : Download libvips] ******************************************************************************************
2024-10-21 06:09:54,867 p=12905 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:09:54,879 p=12905 u=ec2-user n=ansible | TASK [03_rails : Extract libvips] *******************************************************************************************
2024-10-21 06:09:57,127 p=12905 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:09:57,137 p=12905 u=ec2-user n=ansible | TASK [03_rails : Configure the build] ***************************************************************************************
2024-10-21 06:09:57,174 p=12905 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'meson_path' is undefined\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 58, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n# libvips\n- name: Configure the build\n  ^ here\n"}
2024-10-21 06:09:57,176 p=12905 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:09:57,176 p=12905 u=ec2-user n=ansible | 18.180.2.113               : ok=23   changed=9    unreachable=0    failed=1    skipped=3    rescued=0    ignored=4   
2024-10-21 06:11:40,760 p=13327 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:11:40,776 p=13327 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:11:42,515 p=13327 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:11:42,524 p=13327 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:11:45,372 p=13327 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:11:45,383 p=13327 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:11:46,553 p=13327 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:11:46,562 p=13327 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:11:47,259 p=13327 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:11:47,270 p=13327 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:11:47,303 p=13327 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:11:47,312 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:11:47,328 p=13327 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:11:47,338 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:11:47,995 p=13327 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:11:48,007 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:11:48,041 p=13327 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:11:48,049 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:11:48,663 p=13327 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:11:48,674 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:11:49,161 p=13327 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:11:49,170 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:11:49,734 p=13327 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:11:49,744 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:11:50,268 p=13327 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:11:50,268 p=13327 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:11:50,277 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:11:51,741 p=13327 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:11:51,752 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:11:52,394 p=13327 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:11:52,404 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:11:52,984 p=13327 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:11:52,993 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:11:53,530 p=13327 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:11:53,539 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:11:54,239 p=13327 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:11:54,248 p=13327 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:11:54,281 p=13327 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:11:54,289 p=13327 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:11:55,070 p=13327 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": "bash -lc \"/home/ec2-user/.rbenv/shims/gem list rails -i\"\n", "delta": "0:00:00.301686", "end": "2024-10-21 06:11:54.998937", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 06:11:54.697251", "stderr": "", "stderr_lines": [], "stdout": "false", "stdout_lines": ["false"]}
2024-10-21 06:11:55,071 p=13327 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:11:55,081 p=13327 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] ****************************************************************************
2024-10-21 06:11:55,115 p=13327 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rails_version' is undefined\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 8, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-21 06:11:55,115 p=13327 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:11:55,124 p=13327 u=ec2-user n=ansible | TASK [03_rails : Install epel] **********************************************************************************************
2024-10-21 06:12:01,533 p=13327 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "No package matching 'epel-release' found available, installed or updated", "rc": 126, "results": ["No package matching 'epel-release' found available, installed or updated"]}
2024-10-21 06:12:01,536 p=13327 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:12:01,536 p=13327 u=ec2-user n=ansible | 18.180.2.113               : ok=17   changed=6    unreachable=0    failed=1    skipped=3    rescued=0    ignored=3   
2024-10-21 06:14:08,014 p=13601 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:14:08,033 p=13601 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:14:09,717 p=13601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:14:09,727 p=13601 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:14:12,531 p=13601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:14:12,540 p=13601 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:14:13,691 p=13601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:14:13,701 p=13601 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:14:14,388 p=13601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:14:14,398 p=13601 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:14:14,430 p=13601 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:14:14,439 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:14:14,452 p=13601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:14:14,461 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:14:15,102 p=13601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:14:15,113 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:14:15,144 p=13601 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:14:15,151 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:14:15,742 p=13601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:14:15,752 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:14:16,209 p=13601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:14:16,218 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:14:16,777 p=13601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:14:16,788 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:14:17,291 p=13601 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:14:17,292 p=13601 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:14:17,301 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:14:18,868 p=13601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:14:18,879 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:14:19,484 p=13601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:14:19,494 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:14:20,050 p=13601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:14:20,059 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:14:20,582 p=13601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:14:20,591 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:14:21,293 p=13601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:14:21,302 p=13601 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:14:21,333 p=13601 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:14:21,342 p=13601 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:14:22,102 p=13601 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": "bash -lc \"/home/ec2-user/.rbenv/shims/gem list rails -i\"\n", "delta": "0:00:00.303319", "end": "2024-10-21 06:14:22.029519", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 06:14:21.726200", "stderr": "", "stderr_lines": [], "stdout": "false", "stdout_lines": ["false"]}
2024-10-21 06:14:22,102 p=13601 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:14:22,112 p=13601 u=ec2-user n=ansible | TASK [03_rails : Install Rails if not installed] ****************************************************************************
2024-10-21 06:14:22,145 p=13601 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rails_version' is undefined\n\nThe error appears to be in '/home/ec2-user/lec13_circleci/ansible/roles/03_rails/tasks/main.yml': line 8, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Install Rails if not installed\n  ^ here\n"}
2024-10-21 06:14:22,145 p=13601 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:14:22,155 p=13601 u=ec2-user n=ansible | TASK [03_rails : Install epel] **********************************************************************************************
2024-10-21 06:14:23,718 p=13601 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "No package matching 'epel-release' found available, installed or updated", "rc": 126, "results": ["No package matching 'epel-release' found available, installed or updated"]}
2024-10-21 06:14:23,721 p=13601 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:14:23,721 p=13601 u=ec2-user n=ansible | 18.180.2.113               : ok=17   changed=6    unreachable=0    failed=1    skipped=3    rescued=0    ignored=3   
2024-10-21 06:16:02,107 p=13853 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:16:02,126 p=13853 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:16:03,817 p=13853 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:16:03,828 p=13853 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:16:06,570 p=13853 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:16:06,580 p=13853 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:16:07,708 p=13853 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:16:07,718 p=13853 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:16:08,422 p=13853 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:16:08,433 p=13853 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:16:08,467 p=13853 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:16:08,475 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:16:08,490 p=13853 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:16:08,498 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:16:09,144 p=13853 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:16:09,154 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:16:09,185 p=13853 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:16:09,194 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:16:09,803 p=13853 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:16:09,814 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:16:10,281 p=13853 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:16:10,291 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:16:10,882 p=13853 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:16:10,890 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:16:11,397 p=13853 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:16:11,398 p=13853 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:16:11,408 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:16:12,861 p=13853 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:16:12,872 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:16:13,501 p=13853 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:16:13,511 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:16:14,088 p=13853 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:16:14,098 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:16:14,627 p=13853 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:16:14,637 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:16:15,329 p=13853 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:16:15,338 p=13853 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:16:15,370 p=13853 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:16:15,380 p=13853 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:16:16,152 p=13853 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": "bash -lc \"/home/ec2-user/.rbenv/shims/gem list rails -i\"\n", "delta": "0:00:00.303046", "end": "2024-10-21 06:16:16.079342", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 06:16:15.776296", "stderr": "", "stderr_lines": [], "stdout": "false", "stdout_lines": ["false"]}
2024-10-21 06:16:16,152 p=13853 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:16:16,161 p=13853 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 06:16:24,483 p=13853 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:16:24,493 p=13853 u=ec2-user n=ansible | TASK [03_rails : Install epel] **********************************************************************************************
2024-10-21 06:16:25,722 p=13853 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "No package matching 'epel-release' found available, installed or updated", "rc": 126, "results": ["No package matching 'epel-release' found available, installed or updated"]}
2024-10-21 06:16:25,725 p=13853 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:16:25,725 p=13853 u=ec2-user n=ansible | 18.180.2.113               : ok=17   changed=7    unreachable=0    failed=1    skipped=3    rescued=0    ignored=2   
2024-10-21 06:17:18,321 p=14144 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:17:18,338 p=14144 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:17:19,903 p=14144 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:17:19,915 p=14144 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:17:22,751 p=14144 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:17:22,762 p=14144 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:17:23,940 p=14144 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:17:23,950 p=14144 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:17:24,636 p=14144 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:17:24,647 p=14144 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:17:24,680 p=14144 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:17:24,688 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:17:24,703 p=14144 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:17:24,710 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:17:25,365 p=14144 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:17:25,376 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:17:25,406 p=14144 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:17:25,415 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:17:26,013 p=14144 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:17:26,023 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:17:26,488 p=14144 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:17:26,498 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:17:27,061 p=14144 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:17:27,071 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:17:27,585 p=14144 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:17:27,586 p=14144 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:17:27,595 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:17:29,030 p=14144 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:17:29,041 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:17:29,675 p=14144 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:17:29,686 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:17:30,261 p=14144 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:17:30,270 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:17:30,816 p=14144 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:17:30,825 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:17:31,541 p=14144 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:17:31,550 p=14144 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:17:31,584 p=14144 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:17:31,592 p=14144 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:17:32,381 p=14144 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:17:32,391 p=14144 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 06:17:32,423 p=14144 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:17:32,430 p=14144 u=ec2-user n=ansible | TASK [03_rails : amazon-linux-extras] ************************************************************************************
2024-10-21 06:17:45,528 p=14144 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:17:45,538 p=14144 u=ec2-user n=ansible | TASK [03_rails : Install libvips] *******************************************************************************************
2024-10-21 06:17:57,764 p=14144 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "No package matching 'libvips' found available, installed or updated", "rc": 126, "results": ["No package matching 'libvips' found available, installed or updated"]}
2024-10-21 06:17:57,768 p=14144 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:17:57,768 p=14144 u=ec2-user n=ansible | 18.180.2.113               : ok=17   changed=7    unreachable=0    failed=1    skipped=4    rescued=0    ignored=1   
2024-10-21 06:19:44,390 p=14466 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:19:44,407 p=14466 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:19:46,302 p=14466 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:19:46,311 p=14466 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:19:56,295 p=14466 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:19:56,306 p=14466 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:20:05,729 p=14466 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:20:05,739 p=14466 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:20:06,424 p=14466 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:20:06,434 p=14466 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:20:06,469 p=14466 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:20:06,477 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:20:06,493 p=14466 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:20:06,502 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:20:07,201 p=14466 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:20:07,211 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:20:07,244 p=14466 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:20:07,252 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:20:07,852 p=14466 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:20:07,863 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:20:08,328 p=14466 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:20:08,338 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:20:08,899 p=14466 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:20:08,908 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:20:09,421 p=14466 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:20:09,422 p=14466 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:20:09,432 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:20:10,978 p=14466 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:20:10,988 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:20:11,599 p=14466 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:20:11,609 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:20:12,177 p=14466 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:20:12,185 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:20:12,721 p=14466 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:20:12,730 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:20:13,777 p=14466 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:20:13,787 p=14466 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:20:13,820 p=14466 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:20:13,828 p=14466 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:20:14,626 p=14466 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:20:14,635 p=14466 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 06:20:14,668 p=14466 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:20:14,677 p=14466 u=ec2-user n=ansible | TASK [03_rails : Download libvips] ******************************************************************************************
2024-10-21 06:20:17,088 p=14466 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:20:17,098 p=14466 u=ec2-user n=ansible | TASK [03_rails : expand libvips] ********************************************************************************************
2024-10-21 06:20:19,336 p=14466 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:20:19,347 p=14466 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *********************************************************************************************
2024-10-21 06:20:20,972 p=14466 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": ["./configure", "&&", "make", "&&", "make", "install"], "delta": "0:00:01.132428", "end": "2024-10-21 06:20:20.898094", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 06:20:19.765666", "stderr": "configure: WARNING: you should use --build, --host, --target\nconfigure: WARNING: invalid host type: &&\nconfigure: WARNING: you should use --build, --host, --target\nconfigure: WARNING: you should use --build, --host, --target\nconfigure: WARNING: invalid host type: &&\nconfigure: WARNING: you should use --build, --host, --target\nconfigure: WARNING: you should use --build, --host, --target\nInvalid configuration `&&': machine `&&' not recognized\nconfigure: error: /bin/sh ./config.sub && failed", "stderr_lines": ["configure: WARNING: you should use --build, --host, --target", "configure: WARNING: invalid host type: &&", "configure: WARNING: you should use --build, --host, --target", "configure: WARNING: you should use --build, --host, --target", "configure: WARNING: invalid host type: &&", "configure: WARNING: you should use --build, --host, --target", "configure: WARNING: you should use --build, --host, --target", "Invalid configuration `&&': machine `&&' not recognized", "configure: error: /bin/sh ./config.sub && failed"], "stdout": "checking for a BSD-compatible install... /bin/install -c\nchecking whether build environment is sane... yes\nchecking for a thread-safe mkdir -p... /bin/mkdir -p\nchecking for gawk... gawk\nchecking whether make sets $(MAKE)... yes\nchecking whether make supports nested variables... yes\nchecking for &&-pkg-config... no\nchecking for pkg-config... /bin/pkg-config\nchecking pkg-config is at least version 0.9.0... yes\nchecking for gobject-introspection... yes\nchecking build system type... ", "stdout_lines": ["checking for a BSD-compatible install... /bin/install -c", "checking whether build environment is sane... yes", "checking for a thread-safe mkdir -p... /bin/mkdir -p", "checking for gawk... gawk", "checking whether make sets $(MAKE)... yes", "checking whether make supports nested variables... yes", "checking for &&-pkg-config... no", "checking for pkg-config... /bin/pkg-config", "checking pkg-config is at least version 0.9.0... yes", "checking for gobject-introspection... yes", "checking build system type... "]}
2024-10-21 06:20:20,974 p=14466 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:20:20,974 p=14466 u=ec2-user n=ansible | 18.180.2.113               : ok=18   changed=9    unreachable=0    failed=1    skipped=4    rescued=0    ignored=1   
2024-10-21 06:21:12,913 p=14794 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:21:12,932 p=14794 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:21:14,488 p=14794 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:21:14,497 p=14794 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:21:19,771 p=14794 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:21:19,781 p=14794 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:21:20,971 p=14794 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:21:20,981 p=14794 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:21:21,677 p=14794 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:21:21,688 p=14794 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:21:21,720 p=14794 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:21:21,729 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:21:21,742 p=14794 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:21:21,751 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:21:22,406 p=14794 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:21:22,416 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:21:22,448 p=14794 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:21:22,457 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:21:23,067 p=14794 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:21:23,076 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:21:23,556 p=14794 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:21:23,566 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:21:24,123 p=14794 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:21:24,132 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:21:24,637 p=14794 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:21:24,638 p=14794 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:21:24,647 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:21:26,074 p=14794 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:21:26,085 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:21:26,697 p=14794 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:21:26,708 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:21:27,275 p=14794 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:21:27,284 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:21:27,819 p=14794 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:21:27,828 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:21:28,547 p=14794 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:21:28,558 p=14794 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:21:28,590 p=14794 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:21:28,599 p=14794 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:21:29,397 p=14794 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:21:29,408 p=14794 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 06:21:29,439 p=14794 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:21:29,449 p=14794 u=ec2-user n=ansible | TASK [03_rails : Download libvips] ******************************************************************************************
2024-10-21 06:21:30,941 p=14794 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:21:30,951 p=14794 u=ec2-user n=ansible | TASK [03_rails : expand libvips] ********************************************************************************************
2024-10-21 06:21:32,826 p=14794 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:21:32,837 p=14794 u=ec2-user n=ansible | TASK [03_rails : Build libvips] *********************************************************************************************
2024-10-21 06:21:34,432 p=14794 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": ["./configure", "&&", "make", "&&", "make", "install"], "delta": "0:00:01.114764", "end": "2024-10-21 06:21:34.359081", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 06:21:33.244317", "stderr": "configure: WARNING: you should use --build, --host, --target\nconfigure: WARNING: invalid host type: &&\nconfigure: WARNING: you should use --build, --host, --target\nconfigure: WARNING: you should use --build, --host, --target\nconfigure: WARNING: invalid host type: &&\nconfigure: WARNING: you should use --build, --host, --target\nconfigure: WARNING: you should use --build, --host, --target\nInvalid configuration `&&': machine `&&' not recognized\nconfigure: error: /bin/sh ./config.sub && failed", "stderr_lines": ["configure: WARNING: you should use --build, --host, --target", "configure: WARNING: invalid host type: &&", "configure: WARNING: you should use --build, --host, --target", "configure: WARNING: you should use --build, --host, --target", "configure: WARNING: invalid host type: &&", "configure: WARNING: you should use --build, --host, --target", "configure: WARNING: you should use --build, --host, --target", "Invalid configuration `&&': machine `&&' not recognized", "configure: error: /bin/sh ./config.sub && failed"], "stdout": "checking for a BSD-compatible install... /bin/install -c\nchecking whether build environment is sane... yes\nchecking for a thread-safe mkdir -p... /bin/mkdir -p\nchecking for gawk... gawk\nchecking whether make sets $(MAKE)... yes\nchecking whether make supports nested variables... yes\nchecking for &&-pkg-config... no\nchecking for pkg-config... /bin/pkg-config\nchecking pkg-config is at least version 0.9.0... yes\nchecking for gobject-introspection... yes\nchecking build system type... ", "stdout_lines": ["checking for a BSD-compatible install... /bin/install -c", "checking whether build environment is sane... yes", "checking for a thread-safe mkdir -p... /bin/mkdir -p", "checking for gawk... gawk", "checking whether make sets $(MAKE)... yes", "checking whether make supports nested variables... yes", "checking for &&-pkg-config... no", "checking for pkg-config... /bin/pkg-config", "checking pkg-config is at least version 0.9.0... yes", "checking for gobject-introspection... yes", "checking build system type... "]}
2024-10-21 06:21:34,436 p=14794 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:21:34,436 p=14794 u=ec2-user n=ansible | 18.180.2.113               : ok=18   changed=6    unreachable=0    failed=1    skipped=4    rescued=0    ignored=1   
2024-10-21 06:22:05,803 p=15083 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:22:05,822 p=15083 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:22:07,355 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:22:07,367 p=15083 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:22:12,635 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:22:12,645 p=15083 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:22:13,796 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:22:13,805 p=15083 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:22:14,487 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:22:14,498 p=15083 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:22:14,529 p=15083 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:22:14,538 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:22:14,551 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:22:14,559 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:22:15,209 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:22:15,219 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:22:15,251 p=15083 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:22:15,260 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:22:15,866 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:22:15,877 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:22:16,343 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:22:16,352 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:22:16,916 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:22:16,926 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:22:17,427 p=15083 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:22:17,427 p=15083 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:22:17,439 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:22:18,851 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:22:18,860 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:22:19,471 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:22:19,481 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:22:20,047 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:22:20,058 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:22:20,588 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:22:20,597 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:22:21,311 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:22:21,322 p=15083 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:22:21,354 p=15083 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:22:21,363 p=15083 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:22:22,150 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:22:22,159 p=15083 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 06:22:22,190 p=15083 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:22:22,199 p=15083 u=ec2-user n=ansible | TASK [03_rails : Download libvips] ******************************************************************************************
2024-10-21 06:22:23,379 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:22:23,390 p=15083 u=ec2-user n=ansible | TASK [03_rails : expand libvips] ********************************************************************************************
2024-10-21 06:22:25,269 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:22:25,280 p=15083 u=ec2-user n=ansible | TASK [03_rails : libvipsconfigure] **************************************************************************************
2024-10-21 06:22:35,215 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:22:35,225 p=15083 u=ec2-user n=ansible | TASK [03_rails : libvipsmake] *******************************************************************************************
2024-10-21 06:25:54,042 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:25:54,050 p=15083 u=ec2-user n=ansible | TASK [03_rails : libvipsmake install] ***********************************************************************************
2024-10-21 06:25:56,643 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:25:56,653 p=15083 u=ec2-user n=ansible | TASK [04_nodejs : Install NVM] **********************************************************************************************
2024-10-21 06:25:58,957 p=15083 u=ec2-user n=ansible | [WARNING]: Consider using the get_url or uri module rather than running 'curl'.  If you need to use command because get_url
or uri is insufficient you can add 'warn: false' to this command task or set 'command_warnings=False' in ansible.cfg to get
rid of this message.

2024-10-21 06:25:58,958 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:25:58,968 p=15083 u=ec2-user n=ansible | TASK [04_nodejs : Load NVM] *************************************************************************************************
2024-10-21 06:25:59,627 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:25:59,635 p=15083 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1] ***********************************************************************************
2024-10-21 06:26:04,305 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:26:04,315 p=15083 u=ec2-user n=ansible | TASK [04_nodejs : Set Node.js default version] ******************************************************************************
2024-10-21 06:26:05,668 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:26:05,679 p=15083 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *********************************************************************************
2024-10-21 06:26:07,038 p=15083 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "bash -lc \"yarn --version\"", "delta": "0:00:00.213010", "end": "2024-10-21 06:26:06.854207", "msg": "non-zero return code", "rc": 127, "start": "2024-10-21 06:26:06.641197", "stderr": "bash: yarn: command not found", "stderr_lines": ["bash: yarn: command not found"], "stdout": "", "stdout_lines": []}
2024-10-21 06:26:07,038 p=15083 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:26:07,048 p=15083 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] ************************************************************************************
2024-10-21 06:26:08,943 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:26:08,954 p=15083 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ******************************************************************************
2024-10-21 06:26:12,501 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:26:12,510 p=15083 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *******************************************************************************************
2024-10-21 06:26:13,688 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:26:13,697 p=15083 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] **********************************************************************************
2024-10-21 06:26:15,036 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:26:15,050 p=15083 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] ***********************************************************************************
2024-10-21 06:26:17,122 p=15083 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:26:17,135 p=15083 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] *************************************************************************
2024-10-21 06:26:25,831 p=15083 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:26:25,842 p=15083 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] **************************************************************************************
2024-10-21 06:26:38,568 p=15083 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "changes": {"installed": ["mysql"]}, "msg": "You need to be root to perform this command.\n", "rc": 1, "results": ["Loaded plugins: extras_suggestions, langpacks, priorities, update-motd\n"]}
2024-10-21 06:26:38,572 p=15083 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:26:38,572 p=15083 u=ec2-user n=ansible | 18.180.2.113               : ok=32   changed=18   unreachable=0    failed=1    skipped=4    rescued=0    ignored=2   
2024-10-21 06:33:55,452 p=15746 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:33:55,470 p=15746 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:33:57,944 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:33:57,953 p=15746 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:34:04,068 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:34:04,079 p=15746 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:34:06,341 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:34:06,352 p=15746 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:34:07,757 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:34:07,768 p=15746 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:34:07,798 p=15746 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:34:07,808 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:34:07,823 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:34:07,832 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:34:09,234 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:34:09,245 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:34:09,278 p=15746 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:34:09,287 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:34:10,578 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:34:10,588 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:34:11,751 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:34:11,762 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:34:13,136 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:34:13,145 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:34:14,351 p=15746 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:34:14,352 p=15746 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:34:14,361 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:34:16,610 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:34:16,622 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:34:17,927 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:34:17,937 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:34:19,207 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:34:19,217 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:34:20,440 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:34:20,450 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:34:22,204 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:34:22,215 p=15746 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:34:22,248 p=15746 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:34:22,257 p=15746 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:34:23,847 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:34:23,857 p=15746 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 06:34:23,889 p=15746 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:34:23,898 p=15746 u=ec2-user n=ansible | TASK [03_rails : Download libvips] ******************************************************************************************
2024-10-21 06:34:26,304 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:34:26,315 p=15746 u=ec2-user n=ansible | TASK [03_rails : expand libvips] ********************************************************************************************
2024-10-21 06:34:30,430 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:34:30,441 p=15746 u=ec2-user n=ansible | TASK [03_rails : libvipsconfigure] **************************************************************************************
2024-10-21 06:34:40,264 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:34:40,275 p=15746 u=ec2-user n=ansible | TASK [03_rails : libvipsmake] *******************************************************************************************
2024-10-21 06:37:58,212 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:37:58,219 p=15746 u=ec2-user n=ansible | TASK [03_rails : libvipsmake install] ***********************************************************************************
2024-10-21 06:38:01,497 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:38:01,506 p=15746 u=ec2-user n=ansible | TASK [04_nodejs : Install NVM] **********************************************************************************************
2024-10-21 06:38:03,172 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:38:03,182 p=15746 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM installation script] ******************************************************************************
2024-10-21 06:38:05,169 p=15746 u=ec2-user n=ansible | [WARNING]: As of Ansible 2.4, the parameter 'executable' is no longer supported with the 'command' module. Not using
'/bin/bash'.

2024-10-21 06:38:05,172 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:38:05,180 p=15746 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1] ***********************************************************************************
2024-10-21 06:38:07,753 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:38:07,764 p=15746 u=ec2-user n=ansible | TASK [04_nodejs : Set Node.js default version] ******************************************************************************
2024-10-21 06:38:09,127 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:38:09,137 p=15746 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *********************************************************************************
2024-10-21 06:38:10,708 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:38:10,717 p=15746 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] ************************************************************************************
2024-10-21 06:38:10,751 p=15746 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:38:10,762 p=15746 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ******************************************************************************
2024-10-21 06:38:14,605 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:38:14,615 p=15746 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *******************************************************************************************
2024-10-21 06:38:15,823 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:38:15,833 p=15746 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] **********************************************************************************
2024-10-21 06:38:17,176 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:38:17,187 p=15746 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] ***********************************************************************************
2024-10-21 06:38:19,115 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:38:19,125 p=15746 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] *************************************************************************
2024-10-21 06:38:22,634 p=15746 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:38:22,645 p=15746 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] **************************************************************************************
2024-10-21 06:38:32,351 p=15746 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:38:32,362 p=15746 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] ****************************************************************************************
2024-10-21 06:40:07,674 p=15746 u=ec2-user n=ansible |  [ERROR]: User interrupted execution

2024-10-21 06:40:23,865 p=16531 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:40:23,885 p=16531 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:40:26,629 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:40:26,638 p=16531 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:40:33,741 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:40:33,751 p=16531 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:40:45,903 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:40:45,913 p=16531 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:40:51,205 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:40:51,215 p=16531 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:40:51,248 p=16531 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:40:51,257 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:40:51,272 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:40:51,281 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:40:55,899 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:40:55,910 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:40:55,941 p=16531 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:40:55,950 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:40:57,268 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:40:57,278 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:40:58,419 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:40:58,429 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:40:59,912 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:40:59,921 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:41:01,117 p=16531 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:41:01,118 p=16531 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:41:01,127 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:41:03,330 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:41:03,340 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:41:04,624 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:41:04,636 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:41:05,878 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:41:05,889 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:41:07,098 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:41:07,108 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:41:08,595 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:41:08,606 p=16531 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:41:08,640 p=16531 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:41:08,648 p=16531 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:41:10,251 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:41:10,261 p=16531 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 06:41:10,294 p=16531 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:41:10,304 p=16531 u=ec2-user n=ansible | TASK [03_rails : Download libvips] ******************************************************************************************
2024-10-21 06:41:12,716 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:41:12,728 p=16531 u=ec2-user n=ansible | TASK [03_rails : expand libvips] ********************************************************************************************
2024-10-21 06:41:16,848 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:41:16,859 p=16531 u=ec2-user n=ansible | TASK [03_rails : libvipsconfigure] **************************************************************************************
2024-10-21 06:41:26,101 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:41:26,111 p=16531 u=ec2-user n=ansible | TASK [03_rails : libvipsmake] *******************************************************************************************
2024-10-21 06:44:52,987 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:44:52,994 p=16531 u=ec2-user n=ansible | TASK [03_rails : libvipsmake install] ***********************************************************************************
2024-10-21 06:44:56,380 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:44:56,388 p=16531 u=ec2-user n=ansible | TASK [04_nodejs : Install NVM] **********************************************************************************************
2024-10-21 06:44:58,059 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:44:58,070 p=16531 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM installation script] ******************************************************************************
2024-10-21 06:44:59,987 p=16531 u=ec2-user n=ansible | [WARNING]: As of Ansible 2.4, the parameter 'executable' is no longer supported with the 'command' module. Not using
'/bin/bash'.

2024-10-21 06:44:59,988 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:44:59,997 p=16531 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1] ***********************************************************************************
2024-10-21 06:45:02,847 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:45:02,857 p=16531 u=ec2-user n=ansible | TASK [04_nodejs : Set Node.js default version] ******************************************************************************
2024-10-21 06:45:04,194 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:45:04,205 p=16531 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *********************************************************************************
2024-10-21 06:45:05,774 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:45:05,783 p=16531 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] ************************************************************************************
2024-10-21 06:45:05,818 p=16531 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:45:05,826 p=16531 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ******************************************************************************
2024-10-21 06:45:08,726 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:45:08,736 p=16531 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *******************************************************************************************
2024-10-21 06:45:09,917 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:45:09,927 p=16531 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] **********************************************************************************
2024-10-21 06:45:11,250 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:45:11,259 p=16531 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] ***********************************************************************************
2024-10-21 06:45:13,322 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:45:13,333 p=16531 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] *************************************************************************
2024-10-21 06:45:16,968 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:45:16,978 p=16531 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] **************************************************************************************
2024-10-21 06:45:20,537 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:45:20,550 p=16531 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] ****************************************************************************************
2024-10-21 06:46:20,613 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:46:20,624 p=16531 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] *************************************************************************
2024-10-21 06:46:23,027 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:46:23,038 p=16531 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ******************************************************************************************
2024-10-21 06:46:25,362 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:46:25,374 p=16531 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *********************************************************************************************
2024-10-21 06:46:35,065 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:46:35,076 p=16531 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] *****************************************************************************************
2024-10-21 06:46:44,114 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:46:44,123 p=16531 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] ***************************************************************************************
2024-10-21 06:46:46,920 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:46:46,932 p=16531 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] **************************************************************************************
2024-10-21 06:46:48,277 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:46:48,288 p=16531 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] **************************************************************************************
2024-10-21 06:46:50,252 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:46:50,262 p=16531 u=ec2-user n=ansible | TASK [08_app_dev : set development.rb] **************************************************************************************
2024-10-21 06:46:52,565 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:46:52,576 p=16531 u=ec2-user n=ansible | TASK [08_app_dev : set S3 storage.yml] **************************************************************************************
2024-10-21 06:46:53,123 p=16531 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'access_key_id' is undefined"}
2024-10-21 06:46:53,123 p=16531 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:46:53,132 p=16531 u=ec2-user n=ansible | TASK [08_app_dev : set puma.rb] *********************************************************************************************
2024-10-21 06:46:55,436 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:46:55,446 p=16531 u=ec2-user n=ansible | TASK [08_app_dev : set puma.service] ****************************************************************************************
2024-10-21 06:46:57,663 p=16531 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:46:57,673 p=16531 u=ec2-user n=ansible | TASK [08_app_dev : Install Python3 and pip] *********************************************************************************
2024-10-21 06:46:59,490 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:46:59,501 p=16531 u=ec2-user n=ansible | TASK [08_app_dev : Install meson and ninja via pip] *************************************************************************
2024-10-21 06:47:01,889 p=16531 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:47:01,901 p=16531 u=ec2-user n=ansible | TASK [08_app_dev : Clone the libvips repository] ****************************************************************************
2024-10-21 06:47:03,165 p=16531 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/bin/git clone --origin origin https://github.com/libvips/libvips.git /home/ec2-user/libvips", "msg": "fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory.", "rc": 128, "stderr": "fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory.\n", "stderr_lines": ["fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory."], "stdout": "", "stdout_lines": []}
2024-10-21 06:47:03,169 p=16531 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:47:03,169 p=16531 u=ec2-user n=ansible | 18.180.2.113               : ok=46   changed=28   unreachable=0    failed=1    skipped=5    rescued=0    ignored=2   
2024-10-21 06:49:12,530 p=17601 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:49:12,547 p=17601 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:49:15,106 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:15,115 p=17601 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:49:21,192 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:21,205 p=17601 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:49:23,203 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:23,213 p=17601 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:49:24,586 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:24,596 p=17601 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:49:24,627 p=17601 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:49:24,637 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:49:24,651 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:24,658 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:49:25,994 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:26,005 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:49:26,038 p=17601 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:49:26,049 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:49:27,323 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:27,331 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:49:28,491 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:28,500 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:49:29,859 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:29,869 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:49:31,055 p=17601 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:49:31,056 p=17601 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:49:31,064 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:49:33,278 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:33,288 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:49:34,587 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:34,599 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:49:35,856 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:35,866 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:49:37,081 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:37,091 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:49:38,558 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:38,569 p=17601 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:49:38,602 p=17601 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:49:38,612 p=17601 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:49:40,219 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:40,229 p=17601 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 06:49:40,261 p=17601 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:49:40,270 p=17601 u=ec2-user n=ansible | TASK [04_nodejs : Install NVM] **********************************************************************************************
2024-10-21 06:49:41,784 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:41,795 p=17601 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM installation script] ******************************************************************************
2024-10-21 06:49:43,712 p=17601 u=ec2-user n=ansible | [WARNING]: As of Ansible 2.4, the parameter 'executable' is no longer supported with the 'command' module. Not using
'/bin/bash'.

2024-10-21 06:49:43,712 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:43,722 p=17601 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1] ***********************************************************************************
2024-10-21 06:49:46,411 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:46,422 p=17601 u=ec2-user n=ansible | TASK [04_nodejs : Set Node.js default version] ******************************************************************************
2024-10-21 06:49:47,768 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:47,777 p=17601 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *********************************************************************************
2024-10-21 06:49:49,318 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:49,328 p=17601 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] ************************************************************************************
2024-10-21 06:49:49,360 p=17601 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:49:49,370 p=17601 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ******************************************************************************
2024-10-21 06:49:53,695 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:53,705 p=17601 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *******************************************************************************************
2024-10-21 06:49:54,891 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:54,901 p=17601 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] **********************************************************************************
2024-10-21 06:49:56,223 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:49:56,246 p=17601 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] ***********************************************************************************
2024-10-21 06:49:58,066 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:49:58,077 p=17601 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] *************************************************************************
2024-10-21 06:50:01,334 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:01,344 p=17601 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] **************************************************************************************
2024-10-21 06:50:04,604 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:04,614 p=17601 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] ****************************************************************************************
2024-10-21 06:50:06,368 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:50:06,379 p=17601 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] *************************************************************************
2024-10-21 06:50:08,385 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:08,395 p=17601 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ******************************************************************************************
2024-10-21 06:50:10,262 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:10,272 p=17601 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *********************************************************************************************
2024-10-21 06:50:12,095 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:12,105 p=17601 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] *****************************************************************************************
2024-10-21 06:50:13,984 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:13,994 p=17601 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] ***************************************************************************************
2024-10-21 06:50:15,590 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:15,601 p=17601 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] **************************************************************************************
2024-10-21 06:50:15,633 p=17601 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:50:15,643 p=17601 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] **************************************************************************************
2024-10-21 06:50:17,384 p=17601 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:50:17,395 p=17601 u=ec2-user n=ansible | TASK [08_app_dev : set development.rb] **************************************************************************************
2024-10-21 06:50:19,244 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:19,255 p=17601 u=ec2-user n=ansible | TASK [08_app_dev : set S3 storage.yml] **************************************************************************************
2024-10-21 06:50:19,804 p=17601 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'access_key_id' is undefined"}
2024-10-21 06:50:19,804 p=17601 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:50:19,814 p=17601 u=ec2-user n=ansible | TASK [08_app_dev : set puma.rb] *********************************************************************************************
2024-10-21 06:50:21,687 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:21,697 p=17601 u=ec2-user n=ansible | TASK [08_app_dev : set puma.service] ****************************************************************************************
2024-10-21 06:50:23,569 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:23,578 p=17601 u=ec2-user n=ansible | TASK [08_app_dev : Install Python3 and pip] *********************************************************************************
2024-10-21 06:50:25,385 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:25,395 p=17601 u=ec2-user n=ansible | TASK [08_app_dev : Install meson and ninja via pip] *************************************************************************
2024-10-21 06:50:27,164 p=17601 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:50:27,175 p=17601 u=ec2-user n=ansible | TASK [08_app_dev : Remove existing libvips directory] ***********************************************************************
2024-10-21 06:50:27,207 p=17601 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:50:27,217 p=17601 u=ec2-user n=ansible | TASK [08_app_dev : Clone libvips repository] ********************************************************************************
2024-10-21 06:50:28,450 p=17601 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/bin/git clone --origin origin https://github.com/libvips/libvips.git /home/ec2-user/libvips", "msg": "fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory.", "rc": 128, "stderr": "fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory.\n", "stderr_lines": ["fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory."], "stdout": "", "stdout_lines": []}
2024-10-21 06:50:28,453 p=17601 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:50:28,453 p=17601 u=ec2-user n=ansible | 18.180.2.113               : ok=40   changed=14   unreachable=0    failed=1    skipped=7    rescued=0    ignored=2   
2024-10-21 06:51:56,249 p=18348 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:51:56,267 p=18348 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:51:58,637 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:51:58,646 p=18348 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:52:04,741 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:04,752 p=18348 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:52:06,754 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:06,765 p=18348 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:52:08,132 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:08,143 p=18348 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:52:08,174 p=18348 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:52:08,183 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:52:08,196 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:08,206 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:52:09,508 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:09,519 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:52:09,549 p=18348 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:52:09,558 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:52:10,808 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:10,819 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:52:11,944 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:11,954 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:52:13,288 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:13,298 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:52:14,474 p=18348 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:52:14,475 p=18348 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:52:14,483 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:52:16,600 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:16,610 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:52:17,878 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:17,890 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:52:19,128 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:19,138 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:52:20,339 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:20,349 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:52:21,766 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:21,776 p=18348 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:52:21,808 p=18348 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:52:21,818 p=18348 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:52:23,403 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:23,413 p=18348 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 06:52:23,444 p=18348 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:52:23,454 p=18348 u=ec2-user n=ansible | TASK [04_nodejs : Install NVM] **********************************************************************************************
2024-10-21 06:52:24,946 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:24,957 p=18348 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM installation script] ******************************************************************************
2024-10-21 06:52:26,794 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:26,804 p=18348 u=ec2-user n=ansible | TASK [04_nodejs : Load NVM] *************************************************************************************************
2024-10-21 06:52:28,084 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:28,094 p=18348 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1] ***********************************************************************************
2024-10-21 06:52:30,155 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:30,165 p=18348 u=ec2-user n=ansible | TASK [04_nodejs : Set Node.js default version] ******************************************************************************
2024-10-21 06:52:31,490 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:31,506 p=18348 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *********************************************************************************
2024-10-21 06:52:33,019 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:33,030 p=18348 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] ************************************************************************************
2024-10-21 06:52:33,061 p=18348 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:52:33,072 p=18348 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ******************************************************************************
2024-10-21 06:52:36,476 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:36,488 p=18348 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *******************************************************************************************
2024-10-21 06:52:37,674 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:37,686 p=18348 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] **********************************************************************************
2024-10-21 06:52:39,009 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:39,020 p=18348 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] ***********************************************************************************
2024-10-21 06:52:40,860 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:40,871 p=18348 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] *************************************************************************
2024-10-21 06:52:44,103 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:44,113 p=18348 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] **************************************************************************************
2024-10-21 06:52:47,355 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:47,365 p=18348 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] ****************************************************************************************
2024-10-21 06:52:49,126 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:52:49,137 p=18348 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] *************************************************************************
2024-10-21 06:52:51,152 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:51,164 p=18348 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ******************************************************************************************
2024-10-21 06:52:53,027 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:53,037 p=18348 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *********************************************************************************************
2024-10-21 06:52:54,871 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:54,881 p=18348 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] *****************************************************************************************
2024-10-21 06:52:56,768 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:56,779 p=18348 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] ***************************************************************************************
2024-10-21 06:52:58,372 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:52:58,384 p=18348 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] **************************************************************************************
2024-10-21 06:52:58,417 p=18348 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:52:58,427 p=18348 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] **************************************************************************************
2024-10-21 06:53:00,189 p=18348 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:53:00,199 p=18348 u=ec2-user n=ansible | TASK [08_app_dev : set development.rb] **************************************************************************************
2024-10-21 06:53:02,139 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:02,149 p=18348 u=ec2-user n=ansible | TASK [08_app_dev : set S3 storage.yml] **************************************************************************************
2024-10-21 06:53:02,704 p=18348 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'access_key_id' is undefined"}
2024-10-21 06:53:02,705 p=18348 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:53:02,715 p=18348 u=ec2-user n=ansible | TASK [08_app_dev : set puma.rb] *********************************************************************************************
2024-10-21 06:53:04,552 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:04,563 p=18348 u=ec2-user n=ansible | TASK [08_app_dev : set puma.service] ****************************************************************************************
2024-10-21 06:53:06,434 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:06,443 p=18348 u=ec2-user n=ansible | TASK [08_app_dev : Install Python3 and pip] *********************************************************************************
2024-10-21 06:53:08,262 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:08,272 p=18348 u=ec2-user n=ansible | TASK [08_app_dev : Install meson and ninja via pip] *************************************************************************
2024-10-21 06:53:10,020 p=18348 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:10,031 p=18348 u=ec2-user n=ansible | TASK [08_app_dev : Remove existing libvips directory] ***********************************************************************
2024-10-21 06:53:10,064 p=18348 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:53:10,074 p=18348 u=ec2-user n=ansible | TASK [08_app_dev : Clone libvips repository] ********************************************************************************
2024-10-21 06:53:11,295 p=18348 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/bin/git clone --origin origin https://github.com/libvips/libvips.git /home/ec2-user/libvips", "msg": "fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory.", "rc": 128, "stderr": "fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory.\n", "stderr_lines": ["fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory."], "stdout": "", "stdout_lines": []}
2024-10-21 06:53:11,299 p=18348 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:53:11,299 p=18348 u=ec2-user n=ansible | 18.180.2.113               : ok=41   changed=14   unreachable=0    failed=1    skipped=7    rescued=0    ignored=2   
2024-10-21 06:53:36,879 p=19042 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:53:36,897 p=19042 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:53:39,064 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:39,076 p=19042 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:53:45,059 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:45,069 p=19042 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:53:46,907 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:46,918 p=19042 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:53:48,286 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:48,297 p=19042 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:53:48,329 p=19042 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:53:48,340 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:53:48,355 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:48,364 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:53:49,674 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:53:49,683 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:53:49,714 p=19042 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:53:49,723 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:53:50,985 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:50,996 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:53:52,134 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:52,144 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:53:53,484 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:53:53,493 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:53:54,676 p=19042 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:53:54,678 p=19042 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:53:54,686 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:53:56,793 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:56,803 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:53:58,088 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:53:58,099 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:53:59,334 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:53:59,344 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:54:00,557 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:54:00,570 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:54:02,046 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:54:02,064 p=19042 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:54:02,100 p=19042 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:54:02,110 p=19042 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:54:03,707 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:54:03,721 p=19042 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 06:54:03,753 p=19042 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:54:03,763 p=19042 u=ec2-user n=ansible | TASK [04_nodejs : Install NVM] **********************************************************************************************
2024-10-21 06:54:05,258 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:05,269 p=19042 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM installation script] ******************************************************************************
2024-10-21 06:54:07,201 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:54:07,210 p=19042 u=ec2-user n=ansible | TASK [04_nodejs : Load NVM] *************************************************************************************************
2024-10-21 06:54:08,508 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:08,519 p=19042 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1] ***********************************************************************************
2024-10-21 06:54:10,601 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:54:10,613 p=19042 u=ec2-user n=ansible | TASK [04_nodejs : Set Node.js default version] ******************************************************************************
2024-10-21 06:54:11,945 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:54:11,955 p=19042 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *********************************************************************************
2024-10-21 06:54:13,459 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:13,469 p=19042 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] ************************************************************************************
2024-10-21 06:54:13,502 p=19042 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:54:13,511 p=19042 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ******************************************************************************
2024-10-21 06:54:16,515 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:54:16,525 p=19042 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *******************************************************************************************
2024-10-21 06:54:17,696 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:54:17,705 p=19042 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] **********************************************************************************
2024-10-21 06:54:19,048 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:54:19,058 p=19042 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] ***********************************************************************************
2024-10-21 06:54:20,950 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:20,960 p=19042 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] *************************************************************************
2024-10-21 06:54:24,259 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:24,268 p=19042 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] **************************************************************************************
2024-10-21 06:54:27,590 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:27,599 p=19042 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] ****************************************************************************************
2024-10-21 06:54:29,396 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:54:29,407 p=19042 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] *************************************************************************
2024-10-21 06:54:31,453 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:31,462 p=19042 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ******************************************************************************************
2024-10-21 06:54:33,334 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:33,345 p=19042 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *********************************************************************************************
2024-10-21 06:54:35,193 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:35,202 p=19042 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] *****************************************************************************************
2024-10-21 06:54:37,092 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:37,103 p=19042 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] ***************************************************************************************
2024-10-21 06:54:38,703 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:38,715 p=19042 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] **************************************************************************************
2024-10-21 06:54:38,747 p=19042 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:54:38,757 p=19042 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] **************************************************************************************
2024-10-21 06:54:40,537 p=19042 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:54:40,549 p=19042 u=ec2-user n=ansible | TASK [08_app_dev : set development.rb] **************************************************************************************
2024-10-21 06:54:42,434 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:42,446 p=19042 u=ec2-user n=ansible | TASK [08_app_dev : set S3 storage.yml] **************************************************************************************
2024-10-21 06:54:42,997 p=19042 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'access_key_id' is undefined"}
2024-10-21 06:54:42,998 p=19042 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:54:43,006 p=19042 u=ec2-user n=ansible | TASK [08_app_dev : set puma.rb] *********************************************************************************************
2024-10-21 06:54:44,872 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:44,881 p=19042 u=ec2-user n=ansible | TASK [08_app_dev : set puma.service] ****************************************************************************************
2024-10-21 06:54:46,780 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:46,792 p=19042 u=ec2-user n=ansible | TASK [08_app_dev : Install Python3 and pip] *********************************************************************************
2024-10-21 06:54:48,611 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:48,621 p=19042 u=ec2-user n=ansible | TASK [08_app_dev : Install meson and ninja via pip] *************************************************************************
2024-10-21 06:54:50,407 p=19042 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:54:50,417 p=19042 u=ec2-user n=ansible | TASK [08_app_dev : Remove existing libvips directory] ***********************************************************************
2024-10-21 06:54:50,451 p=19042 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:54:50,460 p=19042 u=ec2-user n=ansible | TASK [08_app_dev : Clone libvips repository] ********************************************************************************
2024-10-21 06:54:51,688 p=19042 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/bin/git clone --origin origin https://github.com/libvips/libvips.git /home/ec2-user/libvips", "msg": "fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory.", "rc": 128, "stderr": "fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory.\n", "stderr_lines": ["fatal: destination path '/home/ec2-user/libvips' already exists and is not an empty directory."], "stdout": "", "stdout_lines": []}
2024-10-21 06:54:51,692 p=19042 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:54:51,692 p=19042 u=ec2-user n=ansible | 18.180.2.113               : ok=41   changed=14   unreachable=0    failed=1    skipped=7    rescued=0    ignored=2   
2024-10-21 06:56:04,828 p=19778 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:56:04,846 p=19778 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:56:07,249 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:07,262 p=19778 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:56:13,229 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:13,239 p=19778 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:56:15,089 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:15,098 p=19778 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 06:56:16,455 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:16,467 p=19778 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 06:56:16,498 p=19778 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:56:16,507 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 06:56:16,522 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:16,531 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 06:56:17,855 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:17,866 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 06:56:17,900 p=19778 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:56:17,908 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 06:56:19,177 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:19,188 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 06:56:20,324 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:20,333 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 06:56:21,695 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:21,704 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 06:56:22,875 p=19778 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 06:56:22,875 p=19778 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:56:22,884 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 06:56:24,977 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:24,987 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 06:56:26,272 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:26,284 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 06:56:27,529 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:27,538 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 06:56:28,751 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:28,762 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 06:56:30,164 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:30,175 p=19778 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 06:56:30,205 p=19778 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:56:30,215 p=19778 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 06:56:31,804 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:31,815 p=19778 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 06:56:31,847 p=19778 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:56:31,856 p=19778 u=ec2-user n=ansible | TASK [04_nodejs : Install NVM] **********************************************************************************************
2024-10-21 06:56:33,342 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:33,353 p=19778 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM installation script] ******************************************************************************
2024-10-21 06:56:35,259 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:35,269 p=19778 u=ec2-user n=ansible | TASK [04_nodejs : Load NVM] *************************************************************************************************
2024-10-21 06:56:36,559 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:36,570 p=19778 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1] ***********************************************************************************
2024-10-21 06:56:38,632 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:38,642 p=19778 u=ec2-user n=ansible | TASK [04_nodejs : Set Node.js default version] ******************************************************************************
2024-10-21 06:56:39,981 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:39,990 p=19778 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *********************************************************************************
2024-10-21 06:56:41,521 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:41,530 p=19778 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] ************************************************************************************
2024-10-21 06:56:41,563 p=19778 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:56:41,571 p=19778 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ******************************************************************************
2024-10-21 06:56:46,048 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:46,060 p=19778 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *******************************************************************************************
2024-10-21 06:56:47,256 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:47,266 p=19778 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] **********************************************************************************
2024-10-21 06:56:48,607 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:48,617 p=19778 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] ***********************************************************************************
2024-10-21 06:56:50,453 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:50,463 p=19778 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] *************************************************************************
2024-10-21 06:56:53,696 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:53,706 p=19778 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] **************************************************************************************
2024-10-21 06:56:56,935 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:56:56,945 p=19778 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] ****************************************************************************************
2024-10-21 06:56:58,699 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:56:58,709 p=19778 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] *************************************************************************
2024-10-21 06:57:00,729 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:57:00,739 p=19778 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ******************************************************************************************
2024-10-21 06:57:02,642 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:57:02,653 p=19778 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *********************************************************************************************
2024-10-21 06:57:04,497 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:57:04,507 p=19778 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] *****************************************************************************************
2024-10-21 06:57:06,391 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:57:06,401 p=19778 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] ***************************************************************************************
2024-10-21 06:57:07,992 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:57:08,003 p=19778 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] **************************************************************************************
2024-10-21 06:57:08,036 p=19778 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 06:57:08,046 p=19778 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] **************************************************************************************
2024-10-21 06:57:09,803 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:57:09,813 p=19778 u=ec2-user n=ansible | TASK [08_app_dev : set development.rb] **************************************************************************************
2024-10-21 06:57:11,660 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:57:11,670 p=19778 u=ec2-user n=ansible | TASK [08_app_dev : set S3 storage.yml] **************************************************************************************
2024-10-21 06:57:12,225 p=19778 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'access_key_id' is undefined"}
2024-10-21 06:57:12,226 p=19778 u=ec2-user n=ansible | ...ignoring
2024-10-21 06:57:12,233 p=19778 u=ec2-user n=ansible | TASK [08_app_dev : set puma.rb] *********************************************************************************************
2024-10-21 06:57:14,106 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:57:14,116 p=19778 u=ec2-user n=ansible | TASK [08_app_dev : set puma.service] ****************************************************************************************
2024-10-21 06:57:15,997 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:57:16,007 p=19778 u=ec2-user n=ansible | TASK [08_app_dev : Install Python3 and pip] *********************************************************************************
2024-10-21 06:57:17,822 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:57:17,832 p=19778 u=ec2-user n=ansible | TASK [08_app_dev : Install meson and ninja via pip] *************************************************************************
2024-10-21 06:57:19,584 p=19778 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:57:19,595 p=19778 u=ec2-user n=ansible | TASK [08_app_dev : Remove existing libvips directory] ***********************************************************************
2024-10-21 06:57:20,749 p=19778 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 06:57:20,759 p=19778 u=ec2-user n=ansible | TASK [08_app_dev : Clone libvips repository] ********************************************************************************
2024-10-21 06:57:33,602 p=19778 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "/usr/bin/git checkout --force main", "msg": "Failed to checkout main", "rc": 1, "stderr": "error: pathspec 'main' did not match any file(s) known to git\n", "stderr_lines": ["error: pathspec 'main' did not match any file(s) known to git"], "stdout": "", "stdout_lines": []}
2024-10-21 06:57:33,606 p=19778 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 06:57:33,606 p=19778 u=ec2-user n=ansible | 18.180.2.113               : ok=42   changed=15   unreachable=0    failed=1    skipped=6    rescued=0    ignored=2   
2024-10-21 06:59:47,977 p=20525 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 06:59:47,995 p=20525 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 06:59:50,378 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:59:50,390 p=20525 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 06:59:56,492 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:59:56,503 p=20525 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 06:59:58,775 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 06:59:58,784 p=20525 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 07:00:00,164 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:00,176 p=20525 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 07:00:00,210 p=20525 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:00:00,220 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 07:00:00,235 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:00,245 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 07:00:01,646 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:01,657 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 07:00:01,692 p=20525 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:00:01,703 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 07:00:03,039 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:03,050 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 07:00:04,214 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:04,225 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 07:00:05,599 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:05,609 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 07:00:06,792 p=20525 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 07:00:06,793 p=20525 u=ec2-user n=ansible | ...ignoring
2024-10-21 07:00:06,802 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 07:00:08,922 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:08,932 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 07:00:10,218 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:10,229 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 07:00:11,466 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:11,475 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 07:00:12,676 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:12,687 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 07:00:14,128 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:14,137 p=20525 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 07:00:14,170 p=20525 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:00:14,178 p=20525 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 07:00:15,774 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:15,783 p=20525 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 07:00:15,817 p=20525 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:00:15,826 p=20525 u=ec2-user n=ansible | TASK [04_nodejs : Install NVM] **********************************************************************************************
2024-10-21 07:00:17,493 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:17,504 p=20525 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM installation script] ******************************************************************************
2024-10-21 07:00:19,362 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:19,372 p=20525 u=ec2-user n=ansible | TASK [04_nodejs : Load NVM] *************************************************************************************************
2024-10-21 07:00:20,669 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:20,681 p=20525 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1] ***********************************************************************************
2024-10-21 07:00:22,765 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:22,775 p=20525 u=ec2-user n=ansible | TASK [04_nodejs : Set Node.js default version] ******************************************************************************
2024-10-21 07:00:24,101 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:24,110 p=20525 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *********************************************************************************
2024-10-21 07:00:25,649 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:25,659 p=20525 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] ************************************************************************************
2024-10-21 07:00:25,690 p=20525 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:00:25,700 p=20525 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ******************************************************************************
2024-10-21 07:00:28,778 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:28,788 p=20525 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *******************************************************************************************
2024-10-21 07:00:29,965 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:29,973 p=20525 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] **********************************************************************************
2024-10-21 07:00:31,298 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:31,308 p=20525 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] ***********************************************************************************
2024-10-21 07:00:33,155 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:33,166 p=20525 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] *************************************************************************
2024-10-21 07:00:37,044 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:37,054 p=20525 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] **************************************************************************************
2024-10-21 07:00:40,283 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:40,293 p=20525 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] ****************************************************************************************
2024-10-21 07:00:42,063 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:42,074 p=20525 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] *************************************************************************
2024-10-21 07:00:44,070 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:44,081 p=20525 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ******************************************************************************************
2024-10-21 07:00:45,967 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:45,978 p=20525 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *********************************************************************************************
2024-10-21 07:00:47,819 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:47,829 p=20525 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] *****************************************************************************************
2024-10-21 07:00:49,728 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:49,738 p=20525 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] ***************************************************************************************
2024-10-21 07:00:51,334 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:51,346 p=20525 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] **************************************************************************************
2024-10-21 07:00:51,380 p=20525 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:00:51,389 p=20525 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] **************************************************************************************
2024-10-21 07:00:53,190 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:00:53,201 p=20525 u=ec2-user n=ansible | TASK [08_app_dev : set development.rb] **************************************************************************************
2024-10-21 07:00:55,085 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:55,096 p=20525 u=ec2-user n=ansible | TASK [08_app_dev : set S3 storage.yml] **************************************************************************************
2024-10-21 07:00:55,640 p=20525 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'access_key_id' is undefined"}
2024-10-21 07:00:55,642 p=20525 u=ec2-user n=ansible | ...ignoring
2024-10-21 07:00:55,652 p=20525 u=ec2-user n=ansible | TASK [08_app_dev : set puma.rb] *********************************************************************************************
2024-10-21 07:00:57,521 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:57,530 p=20525 u=ec2-user n=ansible | TASK [08_app_dev : set puma.service] ****************************************************************************************
2024-10-21 07:00:59,430 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:00:59,440 p=20525 u=ec2-user n=ansible | TASK [08_app_dev : Install Python3 and pip] *********************************************************************************
2024-10-21 07:01:01,298 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:01:01,308 p=20525 u=ec2-user n=ansible | TASK [08_app_dev : Install meson and ninja via pip] *************************************************************************
2024-10-21 07:01:03,118 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:01:03,130 p=20525 u=ec2-user n=ansible | TASK [08_app_dev : Remove existing libvips directory] ***********************************************************************
2024-10-21 07:01:04,340 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:01:04,349 p=20525 u=ec2-user n=ansible | TASK [08_app_dev : Clone libvips repository] ********************************************************************************
2024-10-21 07:01:19,398 p=20525 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:01:19,409 p=20525 u=ec2-user n=ansible | TASK [08_app_dev : Build and install libvips] *******************************************************************************
2024-10-21 07:01:20,567 p=20525 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:01:20,578 p=20525 u=ec2-user n=ansible | TASK [08_app_dev : Set LD_LIBRARY_PATH] *************************************************************************************
2024-10-21 07:01:21,761 p=20525 u=ec2-user n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/etc/.ansible_tmpE5zoXmprofile'
2024-10-21 07:01:21,762 p=20525 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "msg": "The destination directory (/etc) is not writable by the current user. Error was: [Errno 13] Permission denied: '/etc/.ansible_tmpE5zoXmprofile'"}
2024-10-21 07:01:21,764 p=20525 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 07:01:21,765 p=20525 u=ec2-user n=ansible | 18.180.2.113               : ok=44   changed=16   unreachable=0    failed=1    skipped=6    rescued=0    ignored=2   
2024-10-21 07:04:58,867 p=21387 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 07:04:58,885 p=21387 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 07:05:01,318 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:01,327 p=21387 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 07:05:07,525 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:07,536 p=21387 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 07:05:09,433 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:09,443 p=21387 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 07:05:10,844 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:10,855 p=21387 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 07:05:10,887 p=21387 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:05:10,895 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 07:05:10,910 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:10,919 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 07:05:12,271 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:12,281 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 07:05:12,335 p=21387 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:05:12,343 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 07:05:13,647 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:13,657 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 07:05:14,826 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:14,836 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 07:05:16,189 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:16,205 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 07:05:17,376 p=21387 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 07:05:17,376 p=21387 u=ec2-user n=ansible | ...ignoring
2024-10-21 07:05:17,386 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 07:05:19,493 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:19,505 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 07:05:20,805 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:20,817 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 07:05:22,060 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:22,071 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 07:05:23,267 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:23,276 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 07:05:24,688 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:24,698 p=21387 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 07:05:24,730 p=21387 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:05:24,738 p=21387 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 07:05:26,344 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:26,354 p=21387 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 07:05:26,388 p=21387 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:05:26,396 p=21387 u=ec2-user n=ansible | TASK [04_nodejs : Install NVM] **********************************************************************************************
2024-10-21 07:05:28,036 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:28,048 p=21387 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM installation script] ******************************************************************************
2024-10-21 07:05:29,901 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:29,911 p=21387 u=ec2-user n=ansible | TASK [04_nodejs : Load NVM] *************************************************************************************************
2024-10-21 07:05:31,185 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:31,195 p=21387 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1] ***********************************************************************************
2024-10-21 07:05:33,678 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:33,688 p=21387 u=ec2-user n=ansible | TASK [04_nodejs : Set Node.js default version] ******************************************************************************
2024-10-21 07:05:35,035 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:35,045 p=21387 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *********************************************************************************
2024-10-21 07:05:36,595 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:36,605 p=21387 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] ************************************************************************************
2024-10-21 07:05:36,637 p=21387 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:05:36,644 p=21387 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ******************************************************************************
2024-10-21 07:05:40,216 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:40,225 p=21387 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *******************************************************************************************
2024-10-21 07:05:41,420 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:41,431 p=21387 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] **********************************************************************************
2024-10-21 07:05:42,764 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:42,775 p=21387 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] ***********************************************************************************
2024-10-21 07:05:44,640 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:44,650 p=21387 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] *************************************************************************
2024-10-21 07:05:48,514 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:48,525 p=21387 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] **************************************************************************************
2024-10-21 07:05:51,760 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:51,770 p=21387 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] ****************************************************************************************
2024-10-21 07:05:53,567 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:05:53,578 p=21387 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] *************************************************************************
2024-10-21 07:05:55,597 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:55,608 p=21387 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ******************************************************************************************
2024-10-21 07:05:57,488 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:57,498 p=21387 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *********************************************************************************************
2024-10-21 07:05:59,339 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:05:59,349 p=21387 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] *****************************************************************************************
2024-10-21 07:06:01,278 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:06:01,288 p=21387 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] ***************************************************************************************
2024-10-21 07:06:02,980 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:06:02,992 p=21387 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] **************************************************************************************
2024-10-21 07:06:03,026 p=21387 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:06:03,036 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] **************************************************************************************
2024-10-21 07:06:04,799 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:06:04,842 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : set development.rb] **************************************************************************************
2024-10-21 07:06:06,712 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:06:06,720 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : set S3 storage.yml] **************************************************************************************
2024-10-21 07:06:09,123 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:06:09,134 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : set puma.rb] *********************************************************************************************
2024-10-21 07:06:10,991 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:06:11,001 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : set puma.service] ****************************************************************************************
2024-10-21 07:06:12,891 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:06:12,901 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : Install Python3 and pip] *********************************************************************************
2024-10-21 07:06:14,743 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:06:14,752 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : Install meson and ninja via pip] *************************************************************************
2024-10-21 07:06:16,507 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:06:16,518 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : Remove existing libvips directory] ***********************************************************************
2024-10-21 07:06:17,724 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:06:17,732 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : Clone libvips repository] ********************************************************************************
2024-10-21 07:06:31,998 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:06:32,009 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : Build and install libvips] *******************************************************************************
2024-10-21 07:06:33,182 p=21387 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:06:33,192 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : Set LD_LIBRARY_PATH for ec2-user] ************************************************************************
2024-10-21 07:06:34,422 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:06:34,432 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : Reload profile] ******************************************************************************************
2024-10-21 07:06:35,643 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:06:35,651 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : asset precompile] ****************************************************************************************
2024-10-21 07:06:54,715 p=21387 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:06:54,725 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : Run database migration] **********************************************************************************
2024-10-21 07:06:57,432 p=21387 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": ["bundle", "exec", "rake", "db:migrate"], "delta": "0:00:01.448469", "end": "2024-10-21 07:06:57.250495", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 07:06:55.802026", "stderr": "rake aborted!\nActiveRecord::ConnectionNotEstablished: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (ActiveRecord::ConnectionNotEstablished)\n/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `load'\n/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `<main>'\n\nCaused by:\nMysql2::Error::ConnectionError: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error::ConnectionError)\n/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `load'\n/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `<main>'\nTasks: TOP => db:migrate\n(See full trace by running task with --trace)", "stderr_lines": ["rake aborted!", "ActiveRecord::ConnectionNotEstablished: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (ActiveRecord::ConnectionNotEstablished)", "/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `load'", "/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `<main>'", "", "Caused by:", "Mysql2::Error::ConnectionError: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error::ConnectionError)", "/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `load'", "/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `<main>'", "Tasks: TOP => db:migrate", "(See full trace by running task with --trace)"], "stdout": "", "stdout_lines": []}
2024-10-21 07:06:57,433 p=21387 u=ec2-user n=ansible | ...ignoring
2024-10-21 07:06:57,454 p=21387 u=ec2-user n=ansible | TASK [08_app_dev : bin/setup] ***********************************************************************************************
2024-10-21 07:07:00,391 p=21387 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": "bash -lc \"bin/setup\"\n", "delta": "0:00:01.769029", "end": "2024-10-21 07:07:00.204248", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 07:06:58.435219", "stderr": "bin/rails aborted!\nActiveRecord::ConnectionNotEstablished: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (ActiveRecord::ConnectionNotEstablished)\n\n\nCaused by:\nMysql2::Error::ConnectionError: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error::ConnectionError)\n\nTasks: TOP => db:prepare\n(See full trace by running task with --trace)\nbin/setup:8:in `system': Command failed with exit 1: bin/rails (RuntimeError)\n\tfrom bin/setup:8:in `system!'\n\tfrom bin/setup:26:in `block in <main>'\n\tfrom /home/ec2-user/.rbenv/versions/3.2.3/lib/ruby/3.2.0/fileutils.rb:244:in `chdir'\n\tfrom /home/ec2-user/.rbenv/versions/3.2.3/lib/ruby/3.2.0/fileutils.rb:244:in `cd'\n\tfrom bin/setup:11:in `<main>'", "stderr_lines": ["bin/rails aborted!", "ActiveRecord::ConnectionNotEstablished: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (ActiveRecord::ConnectionNotEstablished)", "", "", "Caused by:", "Mysql2::Error::ConnectionError: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error::ConnectionError)", "", "Tasks: TOP => db:prepare", "(See full trace by running task with --trace)", "bin/setup:8:in `system': Command failed with exit 1: bin/rails (RuntimeError)", "\tfrom bin/setup:8:in `system!'", "\tfrom bin/setup:26:in `block in <main>'", "\tfrom /home/ec2-user/.rbenv/versions/3.2.3/lib/ruby/3.2.0/fileutils.rb:244:in `chdir'", "\tfrom /home/ec2-user/.rbenv/versions/3.2.3/lib/ruby/3.2.0/fileutils.rb:244:in `cd'", "\tfrom bin/setup:11:in `<main>'"], "stdout": "== Installing dependencies ==\nThe Gemfile's dependencies are satisfied\n\n== Preparing database ==", "stdout_lines": ["== Installing dependencies ==", "The Gemfile's dependencies are satisfied", "", "== Preparing database =="]}
2024-10-21 07:07:00,392 p=21387 u=ec2-user n=ansible | ...ignoring
2024-10-21 07:07:00,395 p=21387 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 07:07:00,396 p=21387 u=ec2-user n=ansible | 18.180.2.113               : ok=49   changed=22   unreachable=0    failed=0    skipped=6    rescued=0    ignored=3   
2024-10-21 07:37:51,023 p=22346 u=ec2-user n=ansible | PLAY [all] ******************************************************************************************************************
2024-10-21 07:37:51,041 p=22346 u=ec2-user n=ansible | TASK [Gathering Facts] ******************************************************************************************************
2024-10-21 07:37:53,595 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:37:53,606 p=22346 u=ec2-user n=ansible | TASK [01_setup : Update all packages on the system] *************************************************************************
2024-10-21 07:38:00,178 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:00,189 p=22346 u=ec2-user n=ansible | TASK [01_setup : Install required packages] *********************************************************************************
2024-10-21 07:38:02,066 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:02,074 p=22346 u=ec2-user n=ansible | TASK [01_setup : Check if the application directory exists] *****************************************************************
2024-10-21 07:38:03,464 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:03,474 p=22346 u=ec2-user n=ansible | TASK [01_setup : Clone the repository] **************************************************************************************
2024-10-21 07:38:03,508 p=22346 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:38:03,517 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Set rbenv path] *********************************************************************************************
2024-10-21 07:38:03,531 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:03,540 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Check if rbenv is installed] ********************************************************************************
2024-10-21 07:38:04,921 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:04,931 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Clone rbenv if not installed] *******************************************************************************
2024-10-21 07:38:04,963 p=22346 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:38:04,973 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv to PATH in .bashrc] *******************************************************************************
2024-10-21 07:38:06,276 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:06,287 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Add rbenv init to .bashrc] **********************************************************************************
2024-10-21 07:38:07,431 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:07,441 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Reload .bashrc] *********************************************************************************************
2024-10-21 07:38:08,790 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:08,800 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Check if ruby-build is installed] ***************************************************************************
2024-10-21 07:38:09,996 p=22346 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": false, "cmd": "ruby-build --version", "msg": "[Errno 2] No such file or directory", "rc": 2}
2024-10-21 07:38:09,997 p=22346 u=ec2-user n=ansible | ...ignoring
2024-10-21 07:38:10,005 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Clone ruby-build if not installed] **************************************************************************
2024-10-21 07:38:12,271 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:12,284 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Insert/update /etc/profile env] *****************************************************************************
2024-10-21 07:38:13,572 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:13,583 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Install Ruby 3.2.3 with rbenv and log output] ***************************************************************
2024-10-21 07:38:14,843 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:14,853 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Set Ruby 3.2.3 as global version] ***************************************************************************
2024-10-21 07:38:16,063 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:16,073 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Check if bundler is installed] ******************************************************************************
2024-10-21 07:38:17,513 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:17,522 p=22346 u=ec2-user n=ansible | TASK [02_ruby : Install bundler if not installed] ***************************************************************************
2024-10-21 07:38:17,555 p=22346 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:38:17,564 p=22346 u=ec2-user n=ansible | TASK [03_rails : Check if Rails is installed] *******************************************************************************
2024-10-21 07:38:19,164 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:19,174 p=22346 u=ec2-user n=ansible | TASK [03_rails : Install Rails] *********************************************************************************************
2024-10-21 07:38:19,206 p=22346 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:38:19,214 p=22346 u=ec2-user n=ansible | TASK [04_nodejs : Install NVM] **********************************************************************************************
2024-10-21 07:38:20,741 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:20,752 p=22346 u=ec2-user n=ansible | TASK [04_nodejs : Run NVM installation script] ******************************************************************************
2024-10-21 07:38:22,728 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:22,738 p=22346 u=ec2-user n=ansible | TASK [04_nodejs : Load NVM] *************************************************************************************************
2024-10-21 07:38:24,054 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:24,063 p=22346 u=ec2-user n=ansible | TASK [04_nodejs : Install Node.js 17.9.1] ***********************************************************************************
2024-10-21 07:38:26,656 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:26,665 p=22346 u=ec2-user n=ansible | TASK [04_nodejs : Set Node.js default version] ******************************************************************************
2024-10-21 07:38:28,011 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:28,020 p=22346 u=ec2-user n=ansible | TASK [05_yarn : Check if yarn is installed] *********************************************************************************
2024-10-21 07:38:29,612 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:29,622 p=22346 u=ec2-user n=ansible | TASK [05_yarn : download yarn installer] ************************************************************************************
2024-10-21 07:38:29,653 p=22346 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:38:29,663 p=22346 u=ec2-user n=ansible | TASK [05_yarn : execute the yarn-installer.sh] ******************************************************************************
2024-10-21 07:38:32,741 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:32,750 p=22346 u=ec2-user n=ansible | TASK [05_yarn : Add Yarn to PATH] *******************************************************************************************
2024-10-21 07:38:33,945 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:33,955 p=22346 u=ec2-user n=ansible | TASK [05_yarn : Ensure .bashrc is sourced] **********************************************************************************
2024-10-21 07:38:35,301 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:35,311 p=22346 u=ec2-user n=ansible | TASK [06_mysql : Remove MariaDB packages] ***********************************************************************************
2024-10-21 07:38:37,183 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:37,192 p=22346 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL development package] *************************************************************************
2024-10-21 07:38:40,586 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:40,596 p=22346 u=ec2-user n=ansible | TASK [06_mysql : Install MySQL client] **************************************************************************************
2024-10-21 07:38:43,859 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:43,869 p=22346 u=ec2-user n=ansible | TASK [06_mysql : Run bundle install] ****************************************************************************************
2024-10-21 07:38:45,688 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:45,699 p=22346 u=ec2-user n=ansible | TASK [06_mysql : Create database.yml from template] *************************************************************************
2024-10-21 07:38:47,760 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:47,772 p=22346 u=ec2-user n=ansible | TASK [06_mysql : Edit /etc/my.cnf] ******************************************************************************************
2024-10-21 07:38:49,676 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:49,687 p=22346 u=ec2-user n=ansible | TASK [07_nginx : Install Nginx] *********************************************************************************************
2024-10-21 07:38:51,542 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:51,553 p=22346 u=ec2-user n=ansible | TASK [07_nginx : Create nginx.conf] *****************************************************************************************
2024-10-21 07:38:53,452 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:53,461 p=22346 u=ec2-user n=ansible | TASK [07_nginx : Start Nginx service] ***************************************************************************************
2024-10-21 07:38:55,084 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:55,096 p=22346 u=ec2-user n=ansible | TASK [07_nginx : Reload Nginx service] **************************************************************************************
2024-10-21 07:38:55,129 p=22346 u=ec2-user n=ansible | skipping: [18.180.2.113]
2024-10-21 07:38:55,139 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : Run bundle install] **************************************************************************************
2024-10-21 07:38:56,928 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:38:56,938 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : set development.rb] **************************************************************************************
2024-10-21 07:38:58,814 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:38:58,824 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : set S3 storage.yml] **************************************************************************************
2024-10-21 07:39:00,716 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:39:00,725 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : set puma.rb] *********************************************************************************************
2024-10-21 07:39:02,653 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:39:02,664 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : set puma.service] ****************************************************************************************
2024-10-21 07:39:04,582 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:39:04,595 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : Install Python3 and pip] *********************************************************************************
2024-10-21 07:39:06,428 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:39:06,438 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : Install meson and ninja via pip] *************************************************************************
2024-10-21 07:39:08,792 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:39:08,803 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : Remove existing libvips directory] ***********************************************************************
2024-10-21 07:39:10,032 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:39:10,041 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : Clone libvips repository] ********************************************************************************
2024-10-21 07:39:23,474 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:39:23,487 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : Build and install libvips] *******************************************************************************
2024-10-21 07:39:24,640 p=22346 u=ec2-user n=ansible | ok: [18.180.2.113]
2024-10-21 07:39:24,649 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : Set LD_LIBRARY_PATH for ec2-user] ************************************************************************
2024-10-21 07:39:25,863 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:39:25,873 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : Reload profile] ******************************************************************************************
2024-10-21 07:39:27,087 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:39:27,095 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : asset precompile] ****************************************************************************************
2024-10-21 07:39:38,020 p=22346 u=ec2-user n=ansible | changed: [18.180.2.113]
2024-10-21 07:39:38,031 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : Run database migration] **********************************************************************************
2024-10-21 07:39:40,404 p=22346 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": ["bundle", "exec", "rake", "db:migrate"], "delta": "0:00:01.171243", "end": "2024-10-21 07:39:40.218897", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 07:39:39.047654", "stderr": "rake aborted!\nActiveRecord::ConnectionNotEstablished: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (ActiveRecord::ConnectionNotEstablished)\n/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `load'\n/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `<main>'\n\nCaused by:\nMysql2::Error::ConnectionError: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error::ConnectionError)\n/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `load'\n/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `<main>'\nTasks: TOP => db:migrate\n(See full trace by running task with --trace)", "stderr_lines": ["rake aborted!", "ActiveRecord::ConnectionNotEstablished: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (ActiveRecord::ConnectionNotEstablished)", "/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `load'", "/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `<main>'", "", "Caused by:", "Mysql2::Error::ConnectionError: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error::ConnectionError)", "/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `load'", "/home/ec2-user/.rbenv/versions/3.2.3/bin/bundle:25:in `<main>'", "Tasks: TOP => db:migrate", "(See full trace by running task with --trace)"], "stdout": "", "stdout_lines": []}
2024-10-21 07:39:40,405 p=22346 u=ec2-user n=ansible | ...ignoring
2024-10-21 07:39:40,415 p=22346 u=ec2-user n=ansible | TASK [08_app_dev : bin/setup] ***********************************************************************************************
2024-10-21 07:39:43,359 p=22346 u=ec2-user n=ansible | fatal: [18.180.2.113]: FAILED! => {"changed": true, "cmd": "bash -lc \"bin/setup\"\n", "delta": "0:00:01.766683", "end": "2024-10-21 07:39:43.174317", "msg": "non-zero return code", "rc": 1, "start": "2024-10-21 07:39:41.407634", "stderr": "/home/ec2-user/.bash_profile: line 14: /usr/local/lib/: Is a directory\nbin/rails aborted!\nActiveRecord::ConnectionNotEstablished: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (ActiveRecord::ConnectionNotEstablished)\n\n\nCaused by:\nMysql2::Error::ConnectionError: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error::ConnectionError)\n\nTasks: TOP => db:prepare\n(See full trace by running task with --trace)\nbin/setup:8:in `system': Command failed with exit 1: bin/rails (RuntimeError)\n\tfrom bin/setup:8:in `system!'\n\tfrom bin/setup:26:in `block in <main>'\n\tfrom /home/ec2-user/.rbenv/versions/3.2.3/lib/ruby/3.2.0/fileutils.rb:244:in `chdir'\n\tfrom /home/ec2-user/.rbenv/versions/3.2.3/lib/ruby/3.2.0/fileutils.rb:244:in `cd'\n\tfrom bin/setup:11:in `<main>'", "stderr_lines": ["/home/ec2-user/.bash_profile: line 14: /usr/local/lib/: Is a directory", "bin/rails aborted!", "ActiveRecord::ConnectionNotEstablished: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (ActiveRecord::ConnectionNotEstablished)", "", "", "Caused by:", "Mysql2::Error::ConnectionError: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error::ConnectionError)", "", "Tasks: TOP => db:prepare", "(See full trace by running task with --trace)", "bin/setup:8:in `system': Command failed with exit 1: bin/rails (RuntimeError)", "\tfrom bin/setup:8:in `system!'", "\tfrom bin/setup:26:in `block in <main>'", "\tfrom /home/ec2-user/.rbenv/versions/3.2.3/lib/ruby/3.2.0/fileutils.rb:244:in `chdir'", "\tfrom /home/ec2-user/.rbenv/versions/3.2.3/lib/ruby/3.2.0/fileutils.rb:244:in `cd'", "\tfrom bin/setup:11:in `<main>'"], "stdout": "== Installing dependencies ==\nThe Gemfile's dependencies are satisfied\n\n== Preparing database ==", "stdout_lines": ["== Installing dependencies ==", "The Gemfile's dependencies are satisfied", "", "== Preparing database =="]}
2024-10-21 07:39:43,359 p=22346 u=ec2-user n=ansible | ...ignoring
2024-10-21 07:39:43,364 p=22346 u=ec2-user n=ansible | PLAY RECAP ******************************************************************************************************************
2024-10-21 07:39:43,364 p=22346 u=ec2-user n=ansible | 18.180.2.113               : ok=49   changed=21   unreachable=0    failed=0    skipped=6    rescued=0    ignored=3   
2024-10-22 13:53:09,113 p=17942 u=ec2-user n=ansible | [WARNING]: Unable to parse /home/ec2-user/inventory as an inventory source

2024-10-22 13:53:09,115 p=17942 u=ec2-user n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2024-10-22 13:53:09,116 p=17942 u=ec2-user n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match
'all'

2024-10-22 13:53:36,357 p=17985 u=ec2-user n=ansible | [WARNING]: Unable to parse /home/ec2-user/inventory as an inventory source

2024-10-22 13:53:36,358 p=17985 u=ec2-user n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2024-10-22 13:53:36,359 p=17985 u=ec2-user n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match
'all'

2024-10-22 13:54:33,523 p=18083 u=ec2-user n=ansible | 18.180.2.113 | UNREACHABLE! => {
    "changed": false, 
    "msg": "Failed to connect to the host via ssh: Warning: Permanently added '18.180.2.113' (ECDSA) to the list of known hosts.\r\nPermission denied (publickey,gssapi-keyex,gssapi-with-mic).", 
    "unreachable": true
}
2024-10-22 13:55:34,943 p=18182 u=ec2-user n=ansible | 18.180.2.113 | UNREACHABLE! => {
    "changed": false, 
    "msg": "Failed to connect to the host via ssh: Warning: Permanently added '18.180.2.113' (ECDSA) to the list of known hosts.\r\nPermission denied (publickey,gssapi-keyex,gssapi-with-mic).", 
    "unreachable": true
}
2024-10-22 13:59:19,638 p=18237 u=ec2-user n=ansible | 18.180.2.113 | UNREACHABLE! => {
    "changed": false, 
    "msg": "Failed to connect to the host via ssh: Warning: Permanently added '18.180.2.113' (ECDSA) to the list of known hosts.\r\nPermission denied (publickey,gssapi-keyex,gssapi-with-mic).", 
    "unreachable": true
}
